{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import toast from'react-hot-toast';import{Plus,BookOpen,Clock,Users,Edit,Trash2,Eye,Search,Filter,Grid,List,MoreVertical,BarChart3,TrendingUp,Award}from'lucide-react';import ConfirmationDialog from'../../components/ConfirmationDialog';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Exams=()=>{const navigate=useNavigate();const[exams,setExams]=useState([]);const[loading,setLoading]=useState(true);const[showAddForm,setShowAddForm]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[selectedGroup,setSelectedGroup]=useState('all');const[viewMode,setViewMode]=useState('grid');// 'grid' or 'list'\nconst[freeExams,setFreeExams]=useState([]);const[showFreeExamModal,setShowFreeExamModal]=useState(false);const[deleteDialog,setDeleteDialog]=useState({isOpen:false,examId:null,examTitle:''});const[removeFromFreeDialog,setRemoveFromFreeDialog]=useState({isOpen:false,examId:null,examTitle:''});const[selectedExamForFree,setSelectedExamForFree]=useState(null);const[retryCount,setRetryCount]=useState(0);useEffect(()=>{// Check backend health first\ncheckBackendHealth();},[]);const checkBackendHealth=async()=>{try{console.log('Checking backend health...');const response=await axios.get('/api/health',{timeout:5000});console.log('Backend is healthy:',response.data);// If backend is healthy, fetch data\nfetchExams();fetchFreeExams();}catch(error){console.error('Backend health check failed:',error);// Try to fetch anyway, but with better error handling\nfetchExams();fetchFreeExams();}};const retryFetch=()=>{setRetryCount(prev=>prev+1);setLoading(true);checkBackendHealth();};const fetchExams=async()=>{try{var _localStorage$getItem,_res$data,_res$data2,_res$data2$data,_res$data3;setLoading(true);console.log('=== FETCHING EXAMS ===');console.log('API URL:',axios.defaults.baseURL+'/api/exams');console.log('Token present:',!!localStorage.getItem('token'));console.log('Token value:',((_localStorage$getItem=localStorage.getItem('token'))===null||_localStorage$getItem===void 0?void 0:_localStorage$getItem.substring(0,20))+'...');const res=await axios.get('/api/exams',{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))},timeout:30000// 30 second timeout for main exams (they have more data)\n});console.log('=== EXAMS RESPONSE ===');console.log('Status:',res.status);console.log('Headers:',res.headers);console.log('Data:',res.data);console.log('Data type:',typeof res.data);console.log('Data.data:',(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.data);console.log('Data.data length:',(_res$data2=res.data)===null||_res$data2===void 0?void 0:(_res$data2$data=_res$data2.data)===null||_res$data2$data===void 0?void 0:_res$data2$data.length);const examsData=((_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.data)||[];console.log('Setting exams:',examsData);setExams(examsData);if(examsData.length===0){console.warn('No exams returned from API');toast.error('لا توجد امتحانات في النظام');}}catch(error){var _error$response,_error$response2,_error$response3,_error$response4,_error$response5,_error$response6,_error$response7;console.error('=== EXAMS ERROR ===');console.error('Error object:',error);console.error('Error message:',error.message);console.error('Error code:',error.code);console.error('Error response:',error.response);console.error('Error details:',{message:error.message,status:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,statusText:(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.statusText,data:(_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.data,headers:(_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.headers});if(error.code==='ECONNABORTED'||error.message.includes('timeout')){toast.error('انتهت مهلة الاتصال بالخادم، يرجى المحاولة مرة أخرى');}else if(((_error$response5=error.response)===null||_error$response5===void 0?void 0:_error$response5.status)===401){toast.error('انتهت صلاحية الجلسة، يرجى تسجيل الدخول مرة أخرى');localStorage.removeItem('token');navigate('/login');}else if(((_error$response6=error.response)===null||_error$response6===void 0?void 0:_error$response6.status)===403){toast.error('ليس لديك صلاحية للوصول إلى هذه الصفحة');navigate('/student');}else if(((_error$response7=error.response)===null||_error$response7===void 0?void 0:_error$response7.status)>=500){toast.error('خطأ في الخادم، يرجى المحاولة لاحقاً');}else if(!error.response){toast.error('لا يمكن الاتصال بالخادم، تحقق من اتصال الإنترنت');}else{toast.error('حدث خطأ أثناء تحميل الامتحانات');}setExams([]);}finally{setLoading(false);}};const fetchFreeExams=async()=>{try{var _res$data4,_res$data5,_res$data5$data,_res$data6;console.log('=== FETCHING FREE EXAMS ===');console.log('API URL:',axios.defaults.baseURL+'/api/exams/free/manage');const res=await axios.get('/api/exams/free/manage',{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});console.log('=== FREE EXAMS RESPONSE ===');console.log('Status:',res.status);console.log('Data:',res.data);console.log('Data.data:',(_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.data);console.log('Data.data length:',(_res$data5=res.data)===null||_res$data5===void 0?void 0:(_res$data5$data=_res$data5.data)===null||_res$data5$data===void 0?void 0:_res$data5$data.length);const freeExamsData=((_res$data6=res.data)===null||_res$data6===void 0?void 0:_res$data6.data)||[];console.log('Setting free exams:',freeExamsData);setFreeExams(freeExamsData);}catch(error){var _error$response8;console.error('=== FREE EXAMS ERROR ===');console.error('Error:',error);console.error('Error response:',error.response);if(((_error$response8=error.response)===null||_error$response8===void 0?void 0:_error$response8.status)===401){// Don't show error for free exams if auth fails, just set empty array\nsetFreeExams([]);}else{toast.error('حدث خطأ أثناء تحميل الامتحانات المجانية');setFreeExams([]);}}};const handleSetAsFree=exam=>{setSelectedExamForFree(exam);setShowFreeExamModal(true);};const handleRemoveFromFree=(examId,examTitle)=>{setRemoveFromFreeDialog({isOpen:true,examId:examId,examTitle:examTitle});};const confirmRemoveFromFree=async()=>{try{await axios.put(\"/api/exams/\".concat(removeFromFreeDialog.examId,\"/remove-free\"),{},{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});toast.success('تم إزالة الامتحان من الامتحانات المجانية');fetchFreeExams();fetchExams();// Refresh exams list to update free exam status\nsetRemoveFromFreeDialog({isOpen:false,examId:null,examTitle:''});}catch(error){console.error('Error removing exam from free:',error);toast.error('حدث خطأ أثناء إزالة الامتحان من المجانية');setRemoveFromFreeDialog({isOpen:false,examId:null,examTitle:''});}};const cancelRemoveFromFree=()=>{setRemoveFromFreeDialog({isOpen:false,examId:null,examTitle:''});};const handleConfirmSetAsFree=async freeExamOrder=>{try{await axios.put(\"/api/exams/\".concat(selectedExamForFree._id,\"/set-free\"),{freeExamOrder},{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});toast.success('تم تعيين الامتحان كامتحان مجاني');setShowFreeExamModal(false);setSelectedExamForFree(null);fetchFreeExams();fetchExams();// Refresh exams list to update free exam status\n}catch(error){var _error$response9,_error$response9$data;console.error('Error setting exam as free:',error);toast.error(((_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.message)||'حدث خطأ أثناء تعيين الامتحان كمجاني');}};const handleDelete=(examId,examTitle)=>{setDeleteDialog({isOpen:true,examId:examId,examTitle:examTitle});};const confirmDelete=async()=>{try{await axios.delete(\"/api/exams/\".concat(deleteDialog.examId),{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});toast.success('تم حذف الامتحان بنجاح');fetchExams();setDeleteDialog({isOpen:false,examId:null,examTitle:''});}catch(error){console.error('Error deleting exam:',error);toast.error('حدث خطأ أثناء حذف الامتحان');setDeleteDialog({isOpen:false,examId:null,examTitle:''});}};const cancelDelete=()=>{setDeleteDialog({isOpen:false,examId:null,examTitle:''});};const handleEdit=examId=>{navigate(\"/teacher/exams/edit/\".concat(examId));};const handleView=examId=>{navigate(\"/teacher/exams/view/\".concat(examId));};// Filter and search logic\nconst filteredExams=exams.filter(exam=>{var _exam$description;const matchesSearch=exam.title.toLowerCase().includes(searchTerm.toLowerCase())||((_exam$description=exam.description)===null||_exam$description===void 0?void 0:_exam$description.toLowerCase().includes(searchTerm.toLowerCase()));const matchesGroup=selectedGroup==='all'||exam.examGroup.toString()===selectedGroup;return matchesSearch&&matchesGroup;});const groupedExams=filteredExams.reduce((groups,exam)=>{const group=exam.examGroup;if(!groups[group]){groups[group]=[];}groups[group].push(exam);return groups;},{});// Sort exams within each group by order\nObject.keys(groupedExams).forEach(group=>{groupedExams[group].sort((a,b)=>a.order-b.order);});// Get unique groups for filter dropdown\nconst availableGroups=[...new Set(exams.map(exam=>exam.examGroup))].sort();if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center h-64 space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"\\u062C\\u0627\\u0631\\u064A \\u062A\\u062D\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A...\"}),retryCount>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mb-2\",children:[\"\\u0645\\u062D\\u0627\\u0648\\u0644\\u0629 \",retryCount]}),/*#__PURE__*/_jsx(\"button\",{onClick:retryFetch,className:\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\",children:\"\\u0625\\u0639\\u0627\\u062F\\u0629 \\u0627\\u0644\\u0645\\u062D\\u0627\\u0648\\u0644\\u0629\"})]})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-primary-600 to-primary-700 rounded-xl p-6 text-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-2\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-primary-100\",children:\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0648\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A \\u0648\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0627\\u062A \\u0628\\u0633\\u0647\\u0648\\u0644\\u0629\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/teacher/exams/create'),className:\"bg-white text-primary-600 hover:bg-primary-50 px-6 py-3 rounded-lg font-semibold flex items-center space-x-2 rtl:space-x-reverse transition-colors shadow-lg\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-5 w-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u062C\\u062F\\u064A\\u062F\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col lg:flex-row gap-4 items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-4 flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex-1 max-w-md\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0627\\u0644\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pr-10 pl-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Filter,{className:\"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedGroup,onChange:e=>setSelectedGroup(e.target.value),className:\"appearance-none pr-10 pl-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white min-w-[150px]\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"\\u0627\\u062E\\u062A\\u0628\\u0627\\u0631\\u0627\\u062A \\u0627\\u0644\\u062A\\u0623\\u0633\\u064A\\u0633\"}),availableGroups.filter(g=>g!==0).map(group=>/*#__PURE__*/_jsxs(\"option\",{value:group,children:[\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0629 \",group]},group))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 rtl:space-x-reverse bg-gray-100 rounded-lg p-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewMode('grid'),className:\"p-2 rounded-md transition-colors \".concat(viewMode==='grid'?'bg-white shadow-sm text-primary-600':'text-gray-500 hover:text-gray-700'),children:/*#__PURE__*/_jsx(Grid,{className:\"h-5 w-5\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewMode('list'),className:\"p-2 rounded-md transition-colors \".concat(viewMode==='list'?'bg-white shadow-sm text-primary-600':'text-gray-500 hover:text-gray-700'),children:/*#__PURE__*/_jsx(List,{className:\"h-5 w-5\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex items-center justify-between text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u0639\\u0631\\u0636 \",filteredExams.length,\" \\u0645\\u0646 \",exams.length,\" \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\"]}),searchTerm&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSearchTerm(''),className:\"text-primary-600 hover:text-primary-800\",children:\"\\u0645\\u0633\\u062D \\u0627\\u0644\\u0628\\u062D\\u062B\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 flex items-center space-x-2 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(Award,{className:\"h-5 w-5 text-orange-600\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0645\\u062C\\u0627\\u0646\\u064A\\u0629\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u062B\\u0644\\u0627\\u062B\\u0629 \\u0627\\u0644\\u0645\\u0639\\u0631\\u0648\\u0636\\u0629 \\u0641\\u064A \\u0627\\u0644\\u0635\\u0641\\u062D\\u0629 \\u0627\\u0644\\u0631\\u0626\\u064A\\u0633\\u064A\\u0629\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:freeExams.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:freeExams.map(exam=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-orange-50 to-orange-100 border border-orange-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-semibold text-orange-800\",children:[\"\\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u0627\\u0644\\u0645\\u062C\\u0627\\u0646\\u064A #\",exam.freeExamOrder]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveFromFree(exam._id,exam.title),className:\"text-red-600 hover:text-red-800 text-sm\",children:\"\\u0625\\u0632\\u0627\\u0644\\u0629\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-orange-700 mb-2\",children:exam.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-orange-600\",children:[exam.totalQuestions,\" \\u0633\\u0624\\u0627\\u0644 \\u2022 \",exam.timeLimit,\" \\u062F\\u0642\\u064A\\u0642\\u0629\"]})]},exam._id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 text-gray-500\",children:[/*#__PURE__*/_jsx(Award,{className:\"h-12 w-12 mx-auto mb-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A \\u0645\\u062C\\u0627\\u0646\\u064A\\u0629 \\u0645\\u062D\\u062F\\u062F\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A \\u0645\\u0646 \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0623\\u062F\\u0646\\u0627\\u0647 \\u0644\\u062A\\u0639\\u064A\\u064A\\u0646\\u0647\\u0627 \\u0643\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A \\u0645\\u062C\\u0627\\u0646\\u064A\\u0629\"})]})})]}),showAddForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u062C\\u062F\\u064A\\u062F\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"h-12 w-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"\\u0646\\u0645\\u0648\\u0630\\u062C \\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u0642\\u064A\\u062F \\u0627\\u0644\\u062A\\u0637\\u0648\\u064A\\u0631\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddForm(false),className:\"btn-secondary\",children:\"\\u0625\\u063A\\u0644\\u0627\\u0642\"})]})})]}),viewMode==='grid'?/*#__PURE__*//* Grid View */_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",children:Object.keys(groupedExams).length===0?/*#__PURE__*/_jsx(\"div\",{className:\"col-span-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 bg-white rounded-xl shadow-sm border\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"h-16 w-16 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-6\",children:searchTerm?'لم يتم العثور على امتحانات تطابق البحث':'ابدأ بإنشاء امتحان جديد'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/teacher/exams/create'),className:\"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u062C\\u062F\\u064A\\u062F\"})]})}):Object.entries(groupedExams).map(_ref=>{let[groupNumber,groupExams]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 \".concat(groupNumber==='0'?'bg-gradient-to-r from-primary-500 to-primary-600 text-white':'bg-gradient-to-r from-gray-50 to-gray-100 border-b'),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold \".concat(groupNumber==='0'?'text-white':'text-gray-900'),children:groupNumber==='0'?'اختبارات التأسيس':\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0629 \".concat(groupNumber)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm \".concat(groupNumber==='0'?'text-primary-100':'text-gray-600'),children:[groupExams.length,\" \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 space-y-3\",children:groupExams.map(exam=>{var _exam$statistics,_exam$statistics2;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gray-50 rounded-lg border hover:shadow-md transition-shadow\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 mb-1\",children:exam.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"\\u062A\\u0631\\u062A\\u064A\\u0628 \",exam.order]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleView(exam._id),className:\"p-2 text-primary-600 hover:bg-primary-100 rounded-lg transition-colors\",title:\"\\u0639\\u0631\\u0636\",children:/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(exam._id),className:\"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors\",title:\"\\u062A\\u0639\\u062F\\u064A\\u0644\",children:/*#__PURE__*/_jsx(Edit,{className:\"h-4 w-4\"})}),!exam.isFreeExam&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSetAsFree(exam),className:\"p-2 text-orange-600 hover:bg-orange-100 rounded-lg transition-colors\",title:\"\\u062A\\u0639\\u064A\\u064A\\u0646 \\u0643\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u0645\\u062C\\u0627\\u0646\\u064A\",children:/*#__PURE__*/_jsx(Award,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(exam._id,exam.title),className:\"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors\",title:\"\\u062D\\u0630\\u0641\",children:/*#__PURE__*/_jsx(Trash2,{className:\"h-4 w-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3 text-sm text-gray-600 mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[exam.totalQuestions,\" \\u0633\\u0624\\u0627\\u0644\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[exam.timeLimit,\" \\u062F\\u0642\\u064A\\u0642\\u0629\"]})]})]}),((_exam$statistics=exam.statistics)===null||_exam$statistics===void 0?void 0:_exam$statistics.averageScore)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-1 rtl:space-x-reverse text-sm text-green-600\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[(_exam$statistics2=exam.statistics)===null||_exam$statistics2===void 0?void 0:_exam$statistics2.averageScore.toFixed(2),\"%\"]})]})]},exam._id);})})]},groupNumber);})}):/*#__PURE__*//* List View */_jsx(\"div\",{className:\"bg-white rounded-xl shadow-sm border overflow-hidden\",children:Object.keys(groupedExams).length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"h-16 w-16 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-6\",children:searchTerm?'لم يتم العثور على امتحانات تطابق البحث':'ابدأ بإنشاء امتحان جديد'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/teacher/exams/create'),className:\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u062C\\u062F\\u064A\\u062F\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0623\\u0633\\u0626\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0648\\u0642\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0645\\u062A\\u0648\\u0633\\u0637 \\u0627\\u0644\\u062F\\u0631\\u062C\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:Object.entries(groupedExams).map(_ref2=>{let[groupNumber,groupExams]=_ref2;return groupExams.map(exam=>{var _exam$statistics3,_exam$statistics4;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-right\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:exam.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"\\u062A\\u0631\\u062A\\u064A\\u0628 \",exam.order]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-right\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(groupNumber==='0'?'bg-primary-100 text-primary-800':'bg-gray-100 text-gray-800'),children:groupNumber==='0'?'التأسيس':\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0629 \".concat(groupNumber)})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-1 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"h-4 w-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"span\",{children:exam.totalQuestions})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-1 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(Clock,{className:\"h-4 w-4 text-gray-400\"}),/*#__PURE__*/_jsxs(\"span\",{children:[exam.timeLimit,\" \\u062F\\u0642\\u064A\\u0642\\u0629\"]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right\",children:((_exam$statistics3=exam.statistics)===null||_exam$statistics3===void 0?void 0:_exam$statistics3.averageScore)>0?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-1 rtl:space-x-reverse text-green-600\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsxs(\"span\",{children:[(_exam$statistics4=exam.statistics)===null||_exam$statistics4===void 0?void 0:_exam$statistics4.averageScore.toFixed(2),\"%\"]})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:\"-\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium text-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-2 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleView(exam._id),className:\"text-primary-600 hover:text-primary-900 p-1 rounded\",title:\"\\u0639\\u0631\\u0636\",children:/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(exam._id),className:\"text-green-600 hover:text-green-900 p-1 rounded\",title:\"\\u062A\\u0639\\u062F\\u064A\\u0644\",children:/*#__PURE__*/_jsx(Edit,{className:\"h-4 w-4\"})}),!exam.isFreeExam&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleSetAsFree(exam),className:\"text-orange-600 hover:text-orange-900 p-1 rounded\",title:\"\\u062A\\u0639\\u064A\\u064A\\u0646 \\u0643\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u0645\\u062C\\u0627\\u0646\\u064A\",children:/*#__PURE__*/_jsx(Award,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(exam._id,exam.title),className:\"text-red-600 hover:text-red-900 p-1 rounded\",title:\"\\u062D\\u0630\\u0641\",children:/*#__PURE__*/_jsx(Trash2,{className:\"h-4 w-4\"})})]})})]},exam._id);});})})]})})}),showFreeExamModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl p-6 max-w-md w-full mx-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-4\",children:\"\\u062A\\u0639\\u064A\\u064A\\u0646 \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u0643\\u0645\\u062C\\u0627\\u0646\\u064A\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-4\",children:[\"\\u0627\\u062E\\u062A\\u0631 \\u062A\\u0631\\u062A\\u064A\\u0628 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u0627\\u0644\\u0645\\u062C\\u0627\\u0646\\u064A \\u0644\\u0640 \",/*#__PURE__*/_jsx(\"strong\",{children:selectedExamForFree===null||selectedExamForFree===void 0?void 0:selectedExamForFree.title})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 mb-6\",children:[1,2,3].map(order=>{const isTaken=freeExams.some(exam=>exam.freeExamOrder===order);return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleConfirmSetAsFree(order),disabled:isTaken,className:\"w-full p-3 rounded-lg border text-right transition-colors \".concat(isTaken?'bg-gray-100 border-gray-300 text-gray-500 cursor-not-allowed':'bg-orange-50 border-orange-200 text-orange-800 hover:bg-orange-100'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-semibold\",children:[\"\\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u0627\\u0644\\u0645\\u062C\\u0627\\u0646\\u064A #\",order]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[order===1&&'اختبار تأسيسي شامل للمفاهيم الأساسية',order===2&&'اختبار تجريبي للمستوى المتوسط',order===3&&'اختبار متقدم للمستوى العالي']}),isTaken&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-red-600 mt-1\",children:\"\\u0645\\u062D\\u062C\\u0648\\u0632 \\u062D\\u0627\\u0644\\u064A\\u0627\\u064B\"})]},order);})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-3 rtl:space-x-reverse\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowFreeExamModal(false);setSelectedExamForFree(null);},className:\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})})]})}),/*#__PURE__*/_jsx(ConfirmationDialog,{isOpen:deleteDialog.isOpen,onClose:cancelDelete,onConfirm:confirmDelete,title:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\",message:\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\\"\".concat(deleteDialog.examTitle,\"\\\"\\u061F\"),confirmText:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\",cancelText:\"\\u0625\\u0644\\u063A\\u0627\\u0621\",type:\"danger\"}),/*#__PURE__*/_jsx(ConfirmationDialog,{isOpen:removeFromFreeDialog.isOpen,onClose:cancelRemoveFromFree,onConfirm:confirmRemoveFromFree,title:\"\\u0625\\u0632\\u0627\\u0644\\u0629 \\u0645\\u0646 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0645\\u062C\\u0627\\u0646\\u064A\\u0629\",message:\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u0625\\u0632\\u0627\\u0644\\u0629 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\\"\".concat(removeFromFreeDialog.examTitle,\"\\\" \\u0645\\u0646 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0645\\u062C\\u0627\\u0646\\u064A\\u0629\\u061F\"),confirmText:\"\\u0625\\u0632\\u0627\\u0644\\u0629\",cancelText:\"\\u0625\\u0644\\u063A\\u0627\\u0621\",type:\"warning\"})]});};export default Exams;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","toast","Plus","BookOpen","Clock","Users","Edit","Trash2","Eye","Search","Filter","Grid","List","MoreVertical","BarChart3","TrendingUp","Award","ConfirmationDialog","jsx","_jsx","jsxs","_jsxs","Exams","navigate","exams","setExams","loading","setLoading","showAddForm","setShowAddForm","searchTerm","setSearchTerm","selectedGroup","setSelectedGroup","viewMode","setViewMode","freeExams","setFreeExams","showFreeExamModal","setShowFreeExamModal","deleteDialog","setDeleteDialog","isOpen","examId","examTitle","removeFromFreeDialog","setRemoveFromFreeDialog","selectedExamForFree","setSelectedExamForFree","retryCount","setRetryCount","checkBackendHealth","console","log","response","get","timeout","data","fetchExams","fetchFreeExams","error","retryFetch","prev","_localStorage$getItem","_res$data","_res$data2","_res$data2$data","_res$data3","defaults","baseURL","localStorage","getItem","substring","res","headers","concat","status","length","examsData","warn","_error$response","_error$response2","_error$response3","_error$response4","_error$response5","_error$response6","_error$response7","message","code","statusText","includes","removeItem","_res$data4","_res$data5","_res$data5$data","_res$data6","freeExamsData","_error$response8","handleSetAsFree","exam","handleRemoveFromFree","confirmRemoveFromFree","put","success","cancelRemoveFromFree","handleConfirmSetAsFree","freeExamOrder","_id","_error$response9","_error$response9$data","handleDelete","confirmDelete","delete","cancelDelete","handleEdit","handleView","filteredExams","filter","_exam$description","matchesSearch","title","toLowerCase","description","matchesGroup","examGroup","toString","groupedExams","reduce","groups","group","push","Object","keys","forEach","sort","a","b","order","availableGroups","Set","map","className","children","onClick","type","placeholder","value","onChange","e","target","g","totalQuestions","timeLimit","entries","_ref","groupNumber","groupExams","_exam$statistics","_exam$statistics2","isFreeExam","statistics","averageScore","toFixed","_ref2","_exam$statistics3","_exam$statistics4","isTaken","some","disabled","onClose","onConfirm","confirmText","cancelText"],"sources":["M:/Qudrat/client/src/pages/Teacher/Exams.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport toast from 'react-hot-toast';\r\nimport { Plus, BookOpen, Clock, Users, Edit, Trash2, Eye, Search, Filter, Grid, List, MoreVertical, BarChart3, TrendingUp, Award } from 'lucide-react';\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\n\r\nconst Exams = () => {\r\n  const navigate = useNavigate();\r\n  const [exams, setExams] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedGroup, setSelectedGroup] = useState('all');\r\n  const [viewMode, setViewMode] = useState('grid'); // 'grid' or 'list'\r\n  const [freeExams, setFreeExams] = useState([]);\r\n  const [showFreeExamModal, setShowFreeExamModal] = useState(false);\r\n  const [deleteDialog, setDeleteDialog] = useState({ isOpen: false, examId: null, examTitle: '' });\r\n  const [removeFromFreeDialog, setRemoveFromFreeDialog] = useState({ isOpen: false, examId: null, examTitle: '' });\r\n  const [selectedExamForFree, setSelectedExamForFree] = useState(null);\r\n  const [retryCount, setRetryCount] = useState(0);\r\n\r\n  useEffect(() => {\r\n    // Check backend health first\r\n    checkBackendHealth();\r\n  }, []);\r\n\r\n  const checkBackendHealth = async () => {\r\n    try {\r\n      console.log('Checking backend health...');\r\n      const response = await axios.get('/api/health', { timeout: 5000 });\r\n      console.log('Backend is healthy:', response.data);\r\n      // If backend is healthy, fetch data\r\n      fetchExams();\r\n      fetchFreeExams();\r\n    } catch (error) {\r\n      console.error('Backend health check failed:', error);\r\n      // Try to fetch anyway, but with better error handling\r\n      fetchExams();\r\n      fetchFreeExams();\r\n    }\r\n  };\r\n\r\n  const retryFetch = () => {\r\n    setRetryCount(prev => prev + 1);\r\n    setLoading(true);\r\n    checkBackendHealth();\r\n  };\r\n\r\n  const fetchExams = async () => {\r\n    try {\r\n      setLoading(true);\r\n      console.log('=== FETCHING EXAMS ===');\r\n      console.log('API URL:', axios.defaults.baseURL + '/api/exams');\r\n      console.log('Token present:', !!localStorage.getItem('token'));\r\n      console.log('Token value:', localStorage.getItem('token')?.substring(0, 20) + '...');\r\n      \r\n      const res = await axios.get('/api/exams', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        timeout: 30000 // 30 second timeout for main exams (they have more data)\r\n      });\r\n      \r\n      console.log('=== EXAMS RESPONSE ===');\r\n      console.log('Status:', res.status);\r\n      console.log('Headers:', res.headers);\r\n      console.log('Data:', res.data);\r\n      console.log('Data type:', typeof res.data);\r\n      console.log('Data.data:', res.data?.data);\r\n      console.log('Data.data length:', res.data?.data?.length);\r\n      \r\n      const examsData = res.data?.data || [];\r\n      console.log('Setting exams:', examsData);\r\n      setExams(examsData);\r\n      \r\n      if (examsData.length === 0) {\r\n        console.warn('No exams returned from API');\r\n        toast.error('لا توجد امتحانات في النظام');\r\n      }\r\n    } catch (error) {\r\n      console.error('=== EXAMS ERROR ===');\r\n      console.error('Error object:', error);\r\n      console.error('Error message:', error.message);\r\n      console.error('Error code:', error.code);\r\n      console.error('Error response:', error.response);\r\n      console.error('Error details:', {\r\n        message: error.message,\r\n        status: error.response?.status,\r\n        statusText: error.response?.statusText,\r\n        data: error.response?.data,\r\n        headers: error.response?.headers\r\n      });\r\n      \r\n      if (error.code === 'ECONNABORTED' || error.message.includes('timeout')) {\r\n        toast.error('انتهت مهلة الاتصال بالخادم، يرجى المحاولة مرة أخرى');\r\n      } else if (error.response?.status === 401) {\r\n        toast.error('انتهت صلاحية الجلسة، يرجى تسجيل الدخول مرة أخرى');\r\n        localStorage.removeItem('token');\r\n        navigate('/login');\r\n      } else if (error.response?.status === 403) {\r\n        toast.error('ليس لديك صلاحية للوصول إلى هذه الصفحة');\r\n        navigate('/student');\r\n      } else if (error.response?.status >= 500) {\r\n        toast.error('خطأ في الخادم، يرجى المحاولة لاحقاً');\r\n      } else if (!error.response) {\r\n        toast.error('لا يمكن الاتصال بالخادم، تحقق من اتصال الإنترنت');\r\n      } else {\r\n        toast.error('حدث خطأ أثناء تحميل الامتحانات');\r\n      }\r\n      setExams([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchFreeExams = async () => {\r\n    try {\r\n      console.log('=== FETCHING FREE EXAMS ===');\r\n      console.log('API URL:', axios.defaults.baseURL + '/api/exams/free/manage');\r\n      \r\n      const res = await axios.get('/api/exams/free/manage', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      \r\n      console.log('=== FREE EXAMS RESPONSE ===');\r\n      console.log('Status:', res.status);\r\n      console.log('Data:', res.data);\r\n      console.log('Data.data:', res.data?.data);\r\n      console.log('Data.data length:', res.data?.data?.length);\r\n      \r\n      const freeExamsData = res.data?.data || [];\r\n      console.log('Setting free exams:', freeExamsData);\r\n      setFreeExams(freeExamsData);\r\n    } catch (error) {\r\n      console.error('=== FREE EXAMS ERROR ===');\r\n      console.error('Error:', error);\r\n      console.error('Error response:', error.response);\r\n      \r\n      if (error.response?.status === 401) {\r\n        // Don't show error for free exams if auth fails, just set empty array\r\n        setFreeExams([]);\r\n      } else {\r\n        toast.error('حدث خطأ أثناء تحميل الامتحانات المجانية');\r\n        setFreeExams([]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSetAsFree = (exam) => {\r\n    setSelectedExamForFree(exam);\r\n    setShowFreeExamModal(true);\r\n  };\r\n\r\n  const handleRemoveFromFree = (examId, examTitle) => {\r\n    setRemoveFromFreeDialog({\r\n      isOpen: true,\r\n      examId: examId,\r\n      examTitle: examTitle\r\n    });\r\n  };\r\n\r\n  const confirmRemoveFromFree = async () => {\r\n    try {\r\n      await axios.put(`/api/exams/${removeFromFreeDialog.examId}/remove-free`, {}, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      toast.success('تم إزالة الامتحان من الامتحانات المجانية');\r\n      fetchFreeExams();\r\n      fetchExams(); // Refresh exams list to update free exam status\r\n      setRemoveFromFreeDialog({ isOpen: false, examId: null, examTitle: '' });\r\n    } catch (error) {\r\n      console.error('Error removing exam from free:', error);\r\n      toast.error('حدث خطأ أثناء إزالة الامتحان من المجانية');\r\n      setRemoveFromFreeDialog({ isOpen: false, examId: null, examTitle: '' });\r\n    }\r\n  };\r\n\r\n  const cancelRemoveFromFree = () => {\r\n    setRemoveFromFreeDialog({ isOpen: false, examId: null, examTitle: '' });\r\n  };\r\n\r\n  const handleConfirmSetAsFree = async (freeExamOrder) => {\r\n    try {\r\n      await axios.put(`/api/exams/${selectedExamForFree._id}/set-free`, \r\n        { freeExamOrder }, \r\n        {\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n          }\r\n        }\r\n      );\r\n      toast.success('تم تعيين الامتحان كامتحان مجاني');\r\n      setShowFreeExamModal(false);\r\n      setSelectedExamForFree(null);\r\n      fetchFreeExams();\r\n      fetchExams(); // Refresh exams list to update free exam status\r\n    } catch (error) {\r\n      console.error('Error setting exam as free:', error);\r\n      toast.error(error.response?.data?.message || 'حدث خطأ أثناء تعيين الامتحان كمجاني');\r\n    }\r\n  };\r\n\r\n  const handleDelete = (examId, examTitle) => {\r\n    setDeleteDialog({\r\n      isOpen: true,\r\n      examId: examId,\r\n      examTitle: examTitle\r\n    });\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    try {\r\n      await axios.delete(`/api/exams/${deleteDialog.examId}`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      toast.success('تم حذف الامتحان بنجاح');\r\n      fetchExams();\r\n      setDeleteDialog({ isOpen: false, examId: null, examTitle: '' });\r\n    } catch (error) {\r\n      console.error('Error deleting exam:', error);\r\n      toast.error('حدث خطأ أثناء حذف الامتحان');\r\n      setDeleteDialog({ isOpen: false, examId: null, examTitle: '' });\r\n    }\r\n  };\r\n\r\n  const cancelDelete = () => {\r\n    setDeleteDialog({ isOpen: false, examId: null, examTitle: '' });\r\n  };\r\n\r\n  const handleEdit = (examId) => {\r\n    navigate(`/teacher/exams/edit/${examId}`);\r\n  };\r\n\r\n  const handleView = (examId) => {\r\n    navigate(`/teacher/exams/view/${examId}`);\r\n  };\r\n\r\n  // Filter and search logic\r\n  const filteredExams = exams.filter(exam => {\r\n    const matchesSearch = exam.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         exam.description?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchesGroup = selectedGroup === 'all' || exam.examGroup.toString() === selectedGroup;\r\n    return matchesSearch && matchesGroup;\r\n  });\r\n\r\n  const groupedExams = filteredExams.reduce((groups, exam) => {\r\n    const group = exam.examGroup;\r\n    if (!groups[group]) {\r\n      groups[group] = [];\r\n    }\r\n    groups[group].push(exam);\r\n    return groups;\r\n  }, {});\r\n\r\n  // Sort exams within each group by order\r\n  Object.keys(groupedExams).forEach(group => {\r\n    groupedExams[group].sort((a, b) => a.order - b.order);\r\n  });\r\n\r\n  // Get unique groups for filter dropdown\r\n  const availableGroups = [...new Set(exams.map(exam => exam.examGroup))].sort();\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-64 space-y-4\">\r\n        <div className=\"spinner\"></div>\r\n        <p className=\"text-gray-600\">جاري تحميل الامتحانات...</p>\r\n        {retryCount > 0 && (\r\n          <div className=\"text-center\">\r\n            <p className=\"text-sm text-gray-500 mb-2\">محاولة {retryCount}</p>\r\n            <button\r\n              onClick={retryFetch}\r\n              className=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\"\r\n            >\r\n              إعادة المحاولة\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header Section */}\r\n      <div className=\"bg-gradient-to-r from-primary-600 to-primary-700 rounded-xl p-6 text-white\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n            <h1 className=\"text-3xl font-bold mb-2\">إدارة الامتحانات</h1>\r\n            <p className=\"text-primary-100\">إنشاء وإدارة الامتحانات والمجموعات بسهولة</p>\r\n        </div>\r\n        <button\r\n          onClick={() => navigate('/teacher/exams/create')}\r\n            className=\"bg-white text-primary-600 hover:bg-primary-50 px-6 py-3 rounded-lg font-semibold flex items-center space-x-2 rtl:space-x-reverse transition-colors shadow-lg\"\r\n          >\r\n            <Plus className=\"h-5 w-5\" />\r\n            <span>إضافة امتحان جديد</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Search and Filter Section */}\r\n      <div className=\"bg-white rounded-xl shadow-sm border p-6\">\r\n        <div className=\"flex flex-col lg:flex-row gap-4 items-center justify-between\">\r\n          <div className=\"flex flex-col sm:flex-row gap-4 flex-1\">\r\n            {/* Search Bar */}\r\n            <div className=\"relative flex-1 max-w-md\">\r\n              <Search className=\"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"البحث في الامتحانات...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"w-full pr-10 pl-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n              />\r\n            </div>\r\n            \r\n            {/* Group Filter */}\r\n            <div className=\"relative\">\r\n              <Filter className=\"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n              <select\r\n                value={selectedGroup}\r\n                onChange={(e) => setSelectedGroup(e.target.value)}\r\n                className=\"appearance-none pr-10 pl-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white min-w-[150px]\"\r\n              >\r\n                <option value=\"all\">جميع المجموعات</option>\r\n                <option value=\"0\">اختبارات التأسيس</option>\r\n                {availableGroups.filter(g => g !== 0).map(group => (\r\n                  <option key={group} value={group}>المجموعة {group}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* View Mode Toggle */}\r\n          <div className=\"flex items-center space-x-2 rtl:space-x-reverse bg-gray-100 rounded-lg p-1\">\r\n            <button\r\n              onClick={() => setViewMode('grid')}\r\n              className={`p-2 rounded-md transition-colors ${\r\n                viewMode === 'grid' ? 'bg-white shadow-sm text-primary-600' : 'text-gray-500 hover:text-gray-700'\r\n              }`}\r\n            >\r\n              <Grid className=\"h-5 w-5\" />\r\n            </button>\r\n            <button\r\n              onClick={() => setViewMode('list')}\r\n              className={`p-2 rounded-md transition-colors ${\r\n                viewMode === 'list' ? 'bg-white shadow-sm text-primary-600' : 'text-gray-500 hover:text-gray-700'\r\n              }`}\r\n            >\r\n              <List className=\"h-5 w-5\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Results Summary */}\r\n        <div className=\"mt-4 flex items-center justify-between text-sm text-gray-600\">\r\n          <span>\r\n            عرض {filteredExams.length} من {exams.length} امتحان\r\n          </span>\r\n          {searchTerm && (\r\n            <button\r\n              onClick={() => setSearchTerm('')}\r\n              className=\"text-primary-600 hover:text-primary-800\"\r\n            >\r\n              مسح البحث\r\n        </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Free Exams Management Section */}\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 flex items-center space-x-2 rtl:space-x-reverse\">\r\n            <Award className=\"h-5 w-5 text-orange-600\" />\r\n            <span>إدارة الامتحانات المجانية</span>\r\n          </h3>\r\n          <p className=\"text-sm text-gray-600 mt-1\">إدارة الامتحانات الثلاثة المعروضة في الصفحة الرئيسية</p>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          {freeExams.length > 0 ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              {freeExams.map((exam) => (\r\n                <div key={exam._id} className=\"bg-gradient-to-r from-orange-50 to-orange-100 border border-orange-200 rounded-lg p-4\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h4 className=\"font-semibold text-orange-800\">\r\n                      الامتحان المجاني #{exam.freeExamOrder}\r\n                    </h4>\r\n                    <button\r\n                      onClick={() => handleRemoveFromFree(exam._id, exam.title)}\r\n                      className=\"text-red-600 hover:text-red-800 text-sm\"\r\n                    >\r\n                      إزالة\r\n                    </button>\r\n                  </div>\r\n                  <p className=\"text-sm text-orange-700 mb-2\">{exam.title}</p>\r\n                  <div className=\"text-xs text-orange-600\">\r\n                    {exam.totalQuestions} سؤال • {exam.timeLimit} دقيقة\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8 text-gray-500\">\r\n              <Award className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\r\n              <p>لا توجد امتحانات مجانية محددة</p>\r\n              <p className=\"text-sm\">اختر امتحانات من القائمة أدناه لتعيينها كامتحانات مجانية</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Add Exam Form */}\r\n      {showAddForm && (\r\n        <div className=\"card\">\r\n          <div className=\"card-header\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900\">إضافة امتحان جديد</h3>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <div className=\"text-center py-8\">\r\n              <BookOpen className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n              <p className=\"text-gray-500 mb-4\">نموذج إضافة الامتحان قيد التطوير</p>\r\n              <button\r\n                onClick={() => setShowAddForm(false)}\r\n                className=\"btn-secondary\"\r\n              >\r\n                إغلاق\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Exams Display */}\r\n      {viewMode === 'grid' ? (\r\n        /* Grid View */\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n          {Object.keys(groupedExams).length === 0 ? (\r\n            <div className=\"col-span-full\">\r\n              <div className=\"text-center py-12 bg-white rounded-xl shadow-sm border\">\r\n                <BookOpen className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">لا توجد امتحانات</h3>\r\n                <p className=\"text-gray-500 mb-6\">\r\n                  {searchTerm ? 'لم يتم العثور على امتحانات تطابق البحث' : 'ابدأ بإنشاء امتحان جديد'}\r\n                </p>\r\n                <button\r\n                  onClick={() => navigate('/teacher/exams/create')}\r\n                  className=\"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700 transition-colors\"\r\n                >\r\n                  إضافة امتحان جديد\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            Object.entries(groupedExams).map(([groupNumber, groupExams]) => (\r\n              <div key={groupNumber} className=\"bg-white rounded-xl shadow-sm border overflow-hidden\">\r\n                {/* Group Header */}\r\n                <div className={`p-4 ${\r\n                  groupNumber === '0' \r\n                    ? 'bg-gradient-to-r from-primary-500 to-primary-600 text-white' \r\n                    : 'bg-gradient-to-r from-gray-50 to-gray-100 border-b'\r\n                }`}>\r\n                  <h3 className={`text-lg font-semibold ${\r\n                    groupNumber === '0' ? 'text-white' : 'text-gray-900'\r\n                  }`}>\r\n                    {groupNumber === '0' ? 'اختبارات التأسيس' : `المجموعة ${groupNumber}`}\r\n                  </h3>\r\n                  <p className={`text-sm ${\r\n                    groupNumber === '0' ? 'text-primary-100' : 'text-gray-600'\r\n                  }`}>\r\n                    {groupExams.length} امتحان\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Group Exams */}\r\n                <div className=\"p-4 space-y-3\">\r\n                  {groupExams.map((exam) => (\r\n                    <div\r\n                      key={exam._id}\r\n                      className=\"p-4 bg-gray-50 rounded-lg border hover:shadow-md transition-shadow\"\r\n                    >\r\n                      <div className=\"flex items-start justify-between mb-3\">\r\n                        <div className=\"flex-1\">\r\n                          <h4 className=\"font-semibold text-gray-900 mb-1\">\r\n                          {exam.title}\r\n                        </h4>\r\n                          <p className=\"text-sm text-gray-600\">\r\n                          ترتيب {exam.order}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-1 rtl:space-x-reverse\">\r\n                          <button\r\n                            onClick={() => handleView(exam._id)}\r\n                            className=\"p-2 text-primary-600 hover:bg-primary-100 rounded-lg transition-colors\"\r\n                            title=\"عرض\"\r\n                          >\r\n                            <Eye className=\"h-4 w-4\" />\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleEdit(exam._id)}\r\n                            className=\"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors\"\r\n                            title=\"تعديل\"\r\n                          >\r\n                            <Edit className=\"h-4 w-4\" />\r\n                          </button>\r\n                          {!exam.isFreeExam && (\r\n                            <button\r\n                              onClick={() => handleSetAsFree(exam)}\r\n                              className=\"p-2 text-orange-600 hover:bg-orange-100 rounded-lg transition-colors\"\r\n                              title=\"تعيين كامتحان مجاني\"\r\n                            >\r\n                              <Award className=\"h-4 w-4\" />\r\n                            </button>\r\n                          )}\r\n                          <button\r\n                            onClick={() => handleDelete(exam._id, exam.title)}\r\n                            className=\"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors\"\r\n                            title=\"حذف\"\r\n                          >\r\n                            <Trash2 className=\"h-4 w-4\" />\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"grid grid-cols-2 gap-3 text-sm text-gray-600 mb-3\">\r\n                        <div className=\"flex items-center space-x-2 rtl:space-x-reverse\">\r\n                          <BookOpen className=\"h-4 w-4\" />\r\n                          <span>{exam.totalQuestions} سؤال</span>\r\n                        </div>\r\n                        <div className=\"flex items-center space-x-2 rtl:space-x-reverse\">\r\n                          <Clock className=\"h-4 w-4\" />\r\n                          <span>{exam.timeLimit} دقيقة</span>\r\n                      </div>\r\n                    </div>\r\n\r\n                      {exam.statistics?.averageScore > 0 && (\r\n                        <div className=\"flex items-center justify-end space-x-1 rtl:space-x-reverse text-sm text-green-600\">\r\n                          <TrendingUp className=\"h-4 w-4\" />\r\n                          <span>{exam.statistics?.averageScore.toFixed(2)}%</span>\r\n                        </div>\r\n                      )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n          </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      ) : (\r\n        /* List View */\r\n        <div className=\"bg-white rounded-xl shadow-sm border overflow-hidden\">\r\n          {Object.keys(groupedExams).length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <BookOpen className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">لا توجد امتحانات</h3>\r\n              <p className=\"text-gray-500 mb-6\">\r\n                {searchTerm ? 'لم يتم العثور على امتحانات تطابق البحث' : 'ابدأ بإنشاء امتحان جديد'}\r\n              </p>\r\n              <button\r\n                onClick={() => navigate('/teacher/exams/create')}\r\n                className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors\"\r\n              >\r\n                إضافة امتحان جديد\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      الامتحان\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      المجموعة\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      الأسئلة\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      الوقت\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      متوسط الدرجات\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      الإجراءات\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {Object.entries(groupedExams).map(([groupNumber, groupExams]) =>\r\n                    groupExams.map((exam) => (\r\n                      <tr key={exam._id} className=\"hover:bg-gray-50\">\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                          <div>\r\n                            <div className=\"text-sm font-medium text-gray-900\">\r\n                              {exam.title}\r\n                            </div>\r\n                            <div className=\"text-sm text-gray-500\">\r\n                              ترتيب {exam.order}\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                          <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                            groupNumber === '0' \r\n                              ? 'bg-primary-100 text-primary-800' \r\n                              : 'bg-gray-100 text-gray-800'\r\n                          }`}>\r\n                            {groupNumber === '0' ? 'التأسيس' : `المجموعة ${groupNumber}`}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right\">\r\n                          <div className=\"flex items-center justify-end space-x-1 rtl:space-x-reverse\">\r\n                            <BookOpen className=\"h-4 w-4 text-gray-400\" />\r\n                            <span>{exam.totalQuestions}</span>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right\">\r\n                          <div className=\"flex items-center justify-end space-x-1 rtl:space-x-reverse\">\r\n                            <Clock className=\"h-4 w-4 text-gray-400\" />\r\n                            <span>{exam.timeLimit} دقيقة</span>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right\">\r\n                          {exam.statistics?.averageScore > 0 ? (\r\n                            <div className=\"flex items-center justify-end space-x-1 rtl:space-x-reverse text-green-600\">\r\n                              <TrendingUp className=\"h-4 w-4\" />\r\n                              <span>{exam.statistics?.averageScore.toFixed(2)}%</span>\r\n                            </div>\r\n                          ) : (\r\n                            <span className=\"text-gray-400\">-</span>\r\n                          )}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-right\">\r\n                          <div className=\"flex items-center justify-end space-x-2 rtl:space-x-reverse\">\r\n                            <button\r\n                              onClick={() => handleView(exam._id)}\r\n                              className=\"text-primary-600 hover:text-primary-900 p-1 rounded\"\r\n                              title=\"عرض\"\r\n                            >\r\n                              <Eye className=\"h-4 w-4\" />\r\n                            </button>\r\n                            <button\r\n                              onClick={() => handleEdit(exam._id)}\r\n                              className=\"text-green-600 hover:text-green-900 p-1 rounded\"\r\n                              title=\"تعديل\"\r\n                            >\r\n                              <Edit className=\"h-4 w-4\" />\r\n                            </button>\r\n                            {!exam.isFreeExam && (\r\n                              <button\r\n                                onClick={() => handleSetAsFree(exam)}\r\n                                className=\"text-orange-600 hover:text-orange-900 p-1 rounded\"\r\n                                title=\"تعيين كامتحان مجاني\"\r\n                              >\r\n                                <Award className=\"h-4 w-4\" />\r\n                              </button>\r\n                            )}\r\n                            <button\r\n                              onClick={() => handleDelete(exam._id, exam.title)}\r\n                              className=\"text-red-600 hover:text-red-900 p-1 rounded\"\r\n                              title=\"حذف\"\r\n                            >\r\n                              <Trash2 className=\"h-4 w-4\" />\r\n                            </button>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Free Exam Order Selection Modal */}\r\n      {showFreeExamModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-xl p-6 max-w-md w-full mx-4\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n              تعيين امتحان كمجاني\r\n            </h3>\r\n            <p className=\"text-gray-600 mb-4\">\r\n              اختر ترتيب الامتحان المجاني لـ <strong>{selectedExamForFree?.title}</strong>\r\n            </p>\r\n            <div className=\"space-y-3 mb-6\">\r\n              {[1, 2, 3].map((order) => {\r\n                const isTaken = freeExams.some(exam => exam.freeExamOrder === order);\r\n                return (\r\n                  <button\r\n                    key={order}\r\n                    onClick={() => handleConfirmSetAsFree(order)}\r\n                    disabled={isTaken}\r\n                    className={`w-full p-3 rounded-lg border text-right transition-colors ${\r\n                      isTaken\r\n                        ? 'bg-gray-100 border-gray-300 text-gray-500 cursor-not-allowed'\r\n                        : 'bg-orange-50 border-orange-200 text-orange-800 hover:bg-orange-100'\r\n                    }`}\r\n                  >\r\n                    <div className=\"font-semibold\">\r\n                      الامتحان المجاني #{order}\r\n                    </div>\r\n                    <div className=\"text-sm\">\r\n                      {order === 1 && 'اختبار تأسيسي شامل للمفاهيم الأساسية'}\r\n                      {order === 2 && 'اختبار تجريبي للمستوى المتوسط'}\r\n                      {order === 3 && 'اختبار متقدم للمستوى العالي'}\r\n                    </div>\r\n                    {isTaken && (\r\n                      <div className=\"text-xs text-red-600 mt-1\">\r\n                        محجوز حالياً\r\n                      </div>\r\n                    )}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n            <div className=\"flex space-x-3 rtl:space-x-reverse\">\r\n              <button\r\n                onClick={() => {\r\n                  setShowFreeExamModal(false);\r\n                  setSelectedExamForFree(null);\r\n                }}\r\n                className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n              >\r\n                إلغاء\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <ConfirmationDialog\r\n        isOpen={deleteDialog.isOpen}\r\n        onClose={cancelDelete}\r\n        onConfirm={confirmDelete}\r\n        title=\"حذف الامتحان\"\r\n        message={`هل أنت متأكد من حذف الامتحان \"${deleteDialog.examTitle}\"؟`}\r\n        confirmText=\"حذف الامتحان\"\r\n        cancelText=\"إلغاء\"\r\n        type=\"danger\"\r\n      />\r\n\r\n      {/* Remove from Free Confirmation Dialog */}\r\n      <ConfirmationDialog\r\n        isOpen={removeFromFreeDialog.isOpen}\r\n        onClose={cancelRemoveFromFree}\r\n        onConfirm={confirmRemoveFromFree}\r\n        title=\"إزالة من الامتحانات المجانية\"\r\n        message={`هل أنت متأكد من إزالة الامتحان \"${removeFromFreeDialog.examTitle}\" من الامتحانات المجانية؟`}\r\n        confirmText=\"إزالة\"\r\n        cancelText=\"إلغاء\"\r\n        type=\"warning\"\r\n      />\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Exams;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}