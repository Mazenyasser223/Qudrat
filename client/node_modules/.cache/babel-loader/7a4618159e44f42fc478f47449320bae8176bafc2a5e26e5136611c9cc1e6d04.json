{"ast":null,"code":"import _objectSpread from\"M:/Qudrat/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{useParams,useNavigate}from'react-router-dom';import{useForm,useFieldArray}from'react-hook-form';import axios from'axios';import toast from'react-hot-toast';import{Plus,Trash2,Save,ArrowLeft}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const EditExam=()=>{const{examId}=useParams();const navigate=useNavigate();const[loading,setLoading]=useState(true);const[submitting,setSubmitting]=useState(false);const[exam,setExam]=useState(null);const[cancelRequest,setCancelRequest]=useState(false);const{register,control,handleSubmit,formState:{errors},setValue,watch,reset}=useForm({defaultValues:{title:'',description:'',examGroup:1,order:1,timeLimit:60,questions:[]}});const{fields,append,remove}=useFieldArray({control,name:'questions'});const fetchExam=useCallback(async()=>{try{setLoading(true);const res=await axios.get(\"/api/exams/\".concat(examId));const examData=res.data.data;setExam(examData);// Reset form with exam data\nreset({title:examData.title,description:examData.description||'',examGroup:examData.examGroup,order:examData.order,timeLimit:examData.timeLimit,questions:examData.questions.map(q=>({questionImage:q.questionImage||'',correctAnswer:q.correctAnswer,explanation:q.explanation||''}))});}catch(error){console.error('Error fetching exam:',error);toast.error('حدث خطأ أثناء تحميل الامتحان');navigate('/teacher/exams');}finally{setLoading(false);}},[examId,navigate,reset]);useEffect(()=>{fetchExam();},[fetchExam]);// Cleanup function\nuseEffect(()=>{return()=>{setCancelRequest(false);};},[]);const onSubmit=async data=>{try{setSubmitting(true);console.log('=== UPDATING EXAM ===');console.log('Exam ID:',examId);console.log('Exam data:',data);// Validate that all questions have correct answers\nconst invalidQuestions=data.questions.filter(q=>!q.correctAnswer||!['A','B','C','D'].includes(q.correctAnswer));if(invalidQuestions.length>0){toast.error('يرجى تحديد الإجابة الصحيحة لجميع الأسئلة');setSubmitting(false);return;}// Send exam data as JSON (images are already Base64 in data.questions)\nconst examData={title:data.title,description:data.description||'',examGroup:parseInt(data.examGroup),order:parseInt(data.order),timeLimit:parseInt(data.timeLimit),questions:data.questions};// Check backend health first\nconsole.log('Checking backend health...');try{const healthResponse=await axios.get('/api/health',{timeout:10000});console.log('Backend health check:',healthResponse.data);}catch(healthError){console.error('Backend health check failed:',healthError.message);toast.error('الخادم غير متصل حالياً، يرجى المحاولة لاحقاً');setSubmitting(false);return;}console.log('Sending exam data to backend...');// Try the request with retry mechanism\nlet response;let retryCount=0;const maxRetries=2;// Allow 2 retries for better reliability\nwhile(retryCount<=maxRetries){// Check if user wants to cancel\nif(cancelRequest){console.log('Operation cancelled by user');setSubmitting(false);setCancelRequest(false);return;}try{// Show progress for large exams\nif(examData.questions&&examData.questions.length>20){toast.loading(\"\\u062C\\u0627\\u0631\\u064A \\u062D\\u0641\\u0638 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 (\".concat(examData.questions.length,\" \\u0633\\u0624\\u0627\\u0644)...\"),{duration:5000});}response=await axios.put(\"/api/exams/\".concat(examId),examData,{headers:{'Content-Type':'application/json'},timeout:45000// 45 seconds for large exams\n});break;// Success, exit retry loop\n}catch(error){retryCount++;console.log(\"Attempt \".concat(retryCount,\" failed:\"),error.message);if(retryCount>maxRetries){throw error;// Re-throw if all retries failed\n}// Show retry message\ntoast.loading(\"\\u0645\\u062D\\u0627\\u0648\\u0644\\u0629 \\u0623\\u062E\\u0631\\u0649... (\".concat(retryCount,\"/\").concat(maxRetries,\")\"),{duration:2000});// Wait before retrying (shorter wait)\nawait new Promise(resolve=>setTimeout(resolve,2000));console.log(\"Retrying... (\".concat(retryCount,\"/\").concat(maxRetries,\")\"));}}console.log('Exam update response:',response.data);toast.success('تم تحديث الامتحان بنجاح');// Small delay to ensure the success message is seen\nsetTimeout(()=>{navigate('/teacher/exams');},1000);}catch(error){var _error$response,_error$response2,_error$response3,_error$response4,_error$response5,_error$response5$data;console.error('=== EXAM UPDATE ERROR ===');console.error('Error object:',error);console.error('Error message:',error.message);console.error('Error response:',error.response);// Handle timeout errors\nif(error.code==='ECONNABORTED'||error.message.includes('timeout')){toast.error('انتهت مهلة التحميل، يرجى المحاولة مرة أخرى');}else if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===404){toast.error('الامتحان غير موجود');}else if(((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===401){toast.error('انتهت صلاحية الجلسة، يرجى تسجيل الدخول مرة أخرى');localStorage.removeItem('token');navigate('/login');}else if(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===403){toast.error('ليس لديك صلاحية لتعديل هذا الامتحان');}else if(((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.status)>=500){toast.error('خطأ في الخادم، يرجى المحاولة لاحقاً');}else if(!error.response){toast.error('لا يمكن الاتصال بالخادم، تحقق من اتصال الإنترنت');}else if((_error$response5=error.response)!==null&&_error$response5!==void 0&&(_error$response5$data=_error$response5.data)!==null&&_error$response5$data!==void 0&&_error$response5$data.errors){// Handle validation errors\nconst validationErrors=error.response.data.errors;const errorMessages=validationErrors.map(err=>err.msg).join(', ');toast.error(\"\\u062E\\u0637\\u0623 \\u0641\\u064A \\u0627\\u0644\\u062A\\u062D\\u0642\\u0642: \".concat(errorMessages));}else{var _error$response6,_error$response6$data;toast.error(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.message)||'حدث خطأ أثناء تحديث الامتحان');}}finally{setSubmitting(false);}};const handleImageUpload=async(event,questionIndex)=>{const file=event.target.files[0];if(!file)return;// Validate file type\nif(!file.type.startsWith('image/')){toast.error('يرجى اختيار ملف صورة صحيح');return;}// Validate file size (5MB limit)\nif(file.size>5*1024*1024){toast.error('حجم الصورة يجب أن يكون أقل من 5 ميجابايت');return;}try{// Convert file to Base64\nconst reader=new FileReader();reader.onload=e=>{const imageData=e.target.result;setValue(\"questions.\".concat(questionIndex,\".questionImage\"),imageData);toast.success('تم رفع الصورة بنجاح');};reader.readAsDataURL(file);}catch(error){console.error('Error reading file:',error);toast.error('حدث خطأ أثناء قراءة الملف');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})});}if(!exam){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mb-4\",children:\"\\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u063A\\u064A\\u0631 \\u0645\\u0648\\u062C\\u0648\\u062F\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/teacher/exams'),className:\"btn-primary\",children:\"\\u0627\\u0644\\u0639\\u0648\\u062F\\u0629 \\u0644\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/teacher/exams'),className:\"flex items-center space-x-2 rtl:space-x-reverse text-gray-600 hover:text-gray-800 transition-colors\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0627\\u0644\\u0639\\u0648\\u062F\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u0648\\u0627\\u0644\\u0623\\u0633\\u0626\\u0644\\u0629\"})]})]})})})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"\\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",className:\"input-field \".concat(errors.title?'border-red-500':'')},register('title',{required:'عنوان الامتحان مطلوب'}))),errors.title&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.title.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0648\\u0635\\u0641 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",className:\"input-field\"},register('description')))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0629\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({className:\"input-field \".concat(errors.examGroup?'border-red-500':'')},register('examGroup',{required:'المجموعة مطلوبة',valueAsNumber:true})),{},{children:[/*#__PURE__*/_jsx(\"option\",{value:0,children:\"\\u0627\\u062E\\u062A\\u0628\\u0627\\u0631\\u0627\\u062A \\u0627\\u0644\\u062A\\u0623\\u0633\\u064A\\u0633\"}),Array.from({length:8},(_,i)=>i+1).map(num=>/*#__PURE__*/_jsxs(\"option\",{value:num,children:[\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0629 \",num]},num))]})),errors.examGroup&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.examGroup.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0627\\u0644\\u062A\\u0631\\u062A\\u064A\\u0628\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"number\",min:\"1\",className:\"input-field \".concat(errors.order?'border-red-500':'')},register('order',{required:'الترتيب مطلوب',valueAsNumber:true,min:{value:1,message:'الترتيب يجب أن يكون 1 أو أكثر'}}))),errors.order&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.order.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0627\\u0644\\u0648\\u0642\\u062A \\u0627\\u0644\\u0645\\u062D\\u062F\\u062F (\\u0628\\u0627\\u0644\\u062F\\u0642\\u0627\\u0626\\u0642)\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"number\",min:\"1\",className:\"input-field \".concat(errors.timeLimit?'border-red-500':'')},register('timeLimit',{required:'الوقت المحدد مطلوب',valueAsNumber:true,min:{value:1,message:'الوقت المحدد يجب أن يكون دقيقة واحدة على الأقل'}}))),errors.timeLimit&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.timeLimit.message})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"\\u0623\\u0633\\u0626\\u0644\\u0629 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>append({questionImage:'',correctAnswer:'A',explanation:''}),className:\"btn-primary flex items-center space-x-2 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0633\\u0624\\u0627\\u0644\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:fields.map((field,index)=>{var _errors$questions,_errors$questions$ind;return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-medium text-gray-900\",children:[\"\\u0627\\u0644\\u0633\\u0624\\u0627\\u0644 \",index+1]}),fields.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>remove(index),className:\"text-red-600 hover:text-red-800 transition-colors\",children:/*#__PURE__*/_jsx(Trash2,{className:\"h-4 w-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0635\\u0648\\u0631\\u0629 \\u0627\\u0644\\u0633\\u0624\\u0627\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:e=>handleImageUpload(e,index),className:\"input-field\"}),watch(\"questions.\".concat(index,\".questionImage\"))&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 p-4 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300\",children:/*#__PURE__*/_jsx(\"img\",{src:watch(\"questions.\".concat(index,\".questionImage\")),alt:\"Question \".concat(index+1),className:\"w-full h-auto rounded-lg border bg-white shadow-sm\",style:{maxHeight:'800px',maxWidth:'100%',objectFit:'contain',minHeight:'400px',width:'100%'}})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0627\\u0628\\u0629 \\u0627\\u0644\\u0635\\u062D\\u064A\\u062D\\u0629\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-2\",children:['A','B','C','D'].map(choice=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center justify-center p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 \".concat(watch(\"questions.\".concat(index,\".correctAnswer\"))===choice?'border-green-500 bg-green-50 text-green-700':'border-gray-300 bg-white hover:border-gray-400'),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"radio\",value:choice},register(\"questions.\".concat(index,\".correctAnswer\"),{required:'الإجابة الصحيحة مطلوبة'})),{},{className:\"sr-only\"})),/*#__PURE__*/_jsxs(\"span\",{className:\"text-lg font-semibold\",children:[\"\\u0627\\u0644\\u062E\\u064A\\u0627\\u0631 \",choice]})]},choice))}),((_errors$questions=errors.questions)===null||_errors$questions===void 0?void 0:(_errors$questions$ind=_errors$questions[index])===null||_errors$questions$ind===void 0?void 0:_errors$questions$ind.correctAnswer)&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message mt-2\",children:errors.questions[index].correctAnswer.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u062A\\u0648\\u0636\\u064A\\u062D \\u0627\\u0644\\u0625\\u062C\\u0627\\u0628\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"}),/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({className:\"input-field\",rows:\"2\"},register(\"questions.\".concat(index,\".explanation\"))),{},{placeholder:\"\\u0634\\u0631\\u062D \\u0627\\u0644\\u0625\\u062C\\u0627\\u0628\\u0629 \\u0627\\u0644\\u0635\\u062D\\u064A\\u062D\\u0629...\"}))]})]},field.id);})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end space-x-4 rtl:space-x-reverse\",children:submitting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setCancelRequest(true),className:\"btn-secondary bg-red-500 hover:bg-red-600 text-white\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621 \\u0627\\u0644\\u0639\\u0645\\u0644\\u064A\\u0629\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",disabled:true,className:\"btn-primary flex items-center space-x-2 rtl:space-x-reverse opacity-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062D\\u0641\\u0638...\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>navigate('/teacher/exams'),className:\"btn-secondary\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"btn-primary flex items-center space-x-2 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(Save,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u062D\\u0641\\u0638 \\u0627\\u0644\\u062A\\u063A\\u064A\\u064A\\u0631\\u0627\\u062A\"})]})]})})]})]});};export default EditExam;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","useForm","useFieldArray","axios","toast","Plus","Trash2","Save","ArrowLeft","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EditExam","examId","navigate","loading","setLoading","submitting","setSubmitting","exam","setExam","cancelRequest","setCancelRequest","register","control","handleSubmit","formState","errors","setValue","watch","reset","defaultValues","title","description","examGroup","order","timeLimit","questions","fields","append","remove","name","fetchExam","res","get","concat","examData","data","map","q","questionImage","correctAnswer","explanation","error","console","onSubmit","log","invalidQuestions","filter","includes","length","parseInt","healthResponse","timeout","healthError","message","response","retryCount","maxRetries","duration","put","headers","Promise","resolve","setTimeout","success","_error$response","_error$response2","_error$response3","_error$response4","_error$response5","_error$response5$data","code","status","localStorage","removeItem","validationErrors","errorMessages","err","msg","join","_error$response6","_error$response6$data","handleImageUpload","event","questionIndex","file","target","files","type","startsWith","size","reader","FileReader","onload","e","imageData","result","readAsDataURL","className","children","onClick","_objectSpread","required","valueAsNumber","value","Array","from","_","i","num","min","field","index","_errors$questions","_errors$questions$ind","accept","onChange","src","alt","style","maxHeight","maxWidth","objectFit","minHeight","width","choice","rows","placeholder","id","disabled"],"sources":["M:/Qudrat/client/src/pages/Teacher/EditExam.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useForm, useFieldArray } from 'react-hook-form';\r\nimport axios from 'axios';\r\nimport toast from 'react-hot-toast';\r\nimport { Plus, Trash2, Save, ArrowLeft } from 'lucide-react';\r\n\r\nconst EditExam = () => {\r\n  const { examId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = useState(true);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [exam, setExam] = useState(null);\r\n  const [cancelRequest, setCancelRequest] = useState(false);\r\n\r\n  const {\r\n    register,\r\n    control,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    setValue,\r\n    watch,\r\n    reset\r\n  } = useForm({\r\n    defaultValues: {\r\n      title: '',\r\n      description: '',\r\n      examGroup: 1,\r\n      order: 1,\r\n      timeLimit: 60,\r\n      questions: []\r\n    }\r\n  });\r\n\r\n  const { fields, append, remove } = useFieldArray({\r\n    control,\r\n    name: 'questions'\r\n  });\r\n\r\n  const fetchExam = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(`/api/exams/${examId}`);\r\n      const examData = res.data.data;\r\n      setExam(examData);\r\n      \r\n      // Reset form with exam data\r\n      reset({\r\n        title: examData.title,\r\n        description: examData.description || '',\r\n        examGroup: examData.examGroup,\r\n        order: examData.order,\r\n        timeLimit: examData.timeLimit,\r\n        questions: examData.questions.map(q => ({\r\n          questionImage: q.questionImage || '',\r\n          correctAnswer: q.correctAnswer,\r\n          explanation: q.explanation || ''\r\n        }))\r\n      });\r\n    } catch (error) {\r\n      console.error('Error fetching exam:', error);\r\n      toast.error('حدث خطأ أثناء تحميل الامتحان');\r\n      navigate('/teacher/exams');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [examId, navigate, reset]);\r\n\r\n  useEffect(() => {\r\n    fetchExam();\r\n  }, [fetchExam]);\r\n\r\n  // Cleanup function\r\n  useEffect(() => {\r\n    return () => {\r\n      setCancelRequest(false);\r\n    };\r\n  }, []);\r\n\r\n  const onSubmit = async (data) => {\r\n    try {\r\n      setSubmitting(true);\r\n      console.log('=== UPDATING EXAM ===');\r\n      console.log('Exam ID:', examId);\r\n      console.log('Exam data:', data);\r\n      \r\n      // Validate that all questions have correct answers\r\n      const invalidQuestions = data.questions.filter(q => !q.correctAnswer || !['A', 'B', 'C', 'D'].includes(q.correctAnswer));\r\n      if (invalidQuestions.length > 0) {\r\n        toast.error('يرجى تحديد الإجابة الصحيحة لجميع الأسئلة');\r\n        setSubmitting(false);\r\n        return;\r\n      }\r\n      \r\n      // Send exam data as JSON (images are already Base64 in data.questions)\r\n      const examData = {\r\n        title: data.title,\r\n        description: data.description || '',\r\n        examGroup: parseInt(data.examGroup),\r\n        order: parseInt(data.order),\r\n        timeLimit: parseInt(data.timeLimit),\r\n        questions: data.questions\r\n      };\r\n\r\n      // Check backend health first\r\n      console.log('Checking backend health...');\r\n      try {\r\n        const healthResponse = await axios.get('/api/health', { timeout: 10000 });\r\n        console.log('Backend health check:', healthResponse.data);\r\n      } catch (healthError) {\r\n        console.error('Backend health check failed:', healthError.message);\r\n        toast.error('الخادم غير متصل حالياً، يرجى المحاولة لاحقاً');\r\n        setSubmitting(false);\r\n        return;\r\n      }\r\n      \r\n      console.log('Sending exam data to backend...');\r\n      \r\n      // Try the request with retry mechanism\r\n      let response;\r\n      let retryCount = 0;\r\n      const maxRetries = 2; // Allow 2 retries for better reliability\r\n      \r\n      while (retryCount <= maxRetries) {\r\n        // Check if user wants to cancel\r\n        if (cancelRequest) {\r\n          console.log('Operation cancelled by user');\r\n          setSubmitting(false);\r\n          setCancelRequest(false);\r\n          return;\r\n        }\r\n        \r\n        try {\r\n          // Show progress for large exams\r\n          if (examData.questions && examData.questions.length > 20) {\r\n            toast.loading(`جاري حفظ الامتحان (${examData.questions.length} سؤال)...`, { duration: 5000 });\r\n          }\r\n          \r\n          response = await axios.put(`/api/exams/${examId}`, examData, {\r\n            headers: {\r\n              'Content-Type': 'application/json',\r\n            },\r\n            timeout: 45000, // 45 seconds for large exams\r\n          });\r\n          break; // Success, exit retry loop\r\n        } catch (error) {\r\n          retryCount++;\r\n          console.log(`Attempt ${retryCount} failed:`, error.message);\r\n          \r\n          if (retryCount > maxRetries) {\r\n            throw error; // Re-throw if all retries failed\r\n          }\r\n          \r\n          // Show retry message\r\n          toast.loading(`محاولة أخرى... (${retryCount}/${maxRetries})`, { duration: 2000 });\r\n          \r\n          // Wait before retrying (shorter wait)\r\n          await new Promise(resolve => setTimeout(resolve, 2000));\r\n          console.log(`Retrying... (${retryCount}/${maxRetries})`);\r\n        }\r\n      }\r\n      \r\n      console.log('Exam update response:', response.data);\r\n      toast.success('تم تحديث الامتحان بنجاح');\r\n      \r\n      // Small delay to ensure the success message is seen\r\n      setTimeout(() => {\r\n        navigate('/teacher/exams');\r\n      }, 1000);\r\n      \r\n    } catch (error) {\r\n      console.error('=== EXAM UPDATE ERROR ===');\r\n      console.error('Error object:', error);\r\n      console.error('Error message:', error.message);\r\n      console.error('Error response:', error.response);\r\n      \r\n      // Handle timeout errors\r\n      if (error.code === 'ECONNABORTED' || error.message.includes('timeout')) {\r\n        toast.error('انتهت مهلة التحميل، يرجى المحاولة مرة أخرى');\r\n      } else if (error.response?.status === 404) {\r\n        toast.error('الامتحان غير موجود');\r\n      } else if (error.response?.status === 401) {\r\n        toast.error('انتهت صلاحية الجلسة، يرجى تسجيل الدخول مرة أخرى');\r\n        localStorage.removeItem('token');\r\n        navigate('/login');\r\n      } else if (error.response?.status === 403) {\r\n        toast.error('ليس لديك صلاحية لتعديل هذا الامتحان');\r\n      } else if (error.response?.status >= 500) {\r\n        toast.error('خطأ في الخادم، يرجى المحاولة لاحقاً');\r\n      } else if (!error.response) {\r\n        toast.error('لا يمكن الاتصال بالخادم، تحقق من اتصال الإنترنت');\r\n      } else if (error.response?.data?.errors) {\r\n        // Handle validation errors\r\n        const validationErrors = error.response.data.errors;\r\n        const errorMessages = validationErrors.map(err => err.msg).join(', ');\r\n        toast.error(`خطأ في التحقق: ${errorMessages}`);\r\n      } else {\r\n        toast.error(error.response?.data?.message || 'حدث خطأ أثناء تحديث الامتحان');\r\n      }\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleImageUpload = async (event, questionIndex) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    // Validate file type\r\n    if (!file.type.startsWith('image/')) {\r\n      toast.error('يرجى اختيار ملف صورة صحيح');\r\n      return;\r\n    }\r\n\r\n    // Validate file size (5MB limit)\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      toast.error('حجم الصورة يجب أن يكون أقل من 5 ميجابايت');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Convert file to Base64\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        const imageData = e.target.result;\r\n        setValue(`questions.${questionIndex}.questionImage`, imageData);\r\n        toast.success('تم رفع الصورة بنجاح');\r\n      };\r\n      reader.readAsDataURL(file);\r\n    } catch (error) {\r\n      console.error('Error reading file:', error);\r\n      toast.error('حدث خطأ أثناء قراءة الملف');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"spinner\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!exam) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 mb-4\">الامتحان غير موجود</h2>\r\n        <button\r\n          onClick={() => navigate('/teacher/exams')}\r\n          className=\"btn-primary\"\r\n        >\r\n          العودة لإدارة الامتحانات\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"card\">\r\n        <div className=\"card-body\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4 rtl:space-x-reverse\">\r\n              <button\r\n                onClick={() => navigate('/teacher/exams')}\r\n                className=\"flex items-center space-x-2 rtl:space-x-reverse text-gray-600 hover:text-gray-800 transition-colors\"\r\n              >\r\n                <ArrowLeft className=\"h-4 w-4\" />\r\n                <span>العودة</span>\r\n              </button>\r\n              <div>\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">تعديل الامتحان</h1>\r\n                <p className=\"text-gray-600\">تعديل بيانات الامتحان والأسئلة</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\r\n        {/* Basic Info */}\r\n        <div className=\"card\">\r\n          <div className=\"card-header\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900\">معلومات الامتحان</h3>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">عنوان الامتحان</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className={`input-field ${errors.title ? 'border-red-500' : ''}`}\r\n                  {...register('title', { required: 'عنوان الامتحان مطلوب' })}\r\n                />\r\n                {errors.title && (\r\n                  <p className=\"error-message\">{errors.title.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">وصف الامتحان (اختياري)</label>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"input-field\"\r\n                  {...register('description')}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">المجموعة</label>\r\n                <select\r\n                  className={`input-field ${errors.examGroup ? 'border-red-500' : ''}`}\r\n                  {...register('examGroup', { \r\n                    required: 'المجموعة مطلوبة',\r\n                    valueAsNumber: true \r\n                  })}\r\n                >\r\n                  <option value={0}>اختبارات التأسيس</option>\r\n                  {Array.from({ length: 8 }, (_, i) => i + 1).map(num => (\r\n                    <option key={num} value={num}>المجموعة {num}</option>\r\n                  ))}\r\n                </select>\r\n                {errors.examGroup && (\r\n                  <p className=\"error-message\">{errors.examGroup.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">الترتيب</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  className={`input-field ${errors.order ? 'border-red-500' : ''}`}\r\n                  {...register('order', { \r\n                    required: 'الترتيب مطلوب',\r\n                    valueAsNumber: true,\r\n                    min: { value: 1, message: 'الترتيب يجب أن يكون 1 أو أكثر' }\r\n                  })}\r\n                />\r\n                {errors.order && (\r\n                  <p className=\"error-message\">{errors.order.message}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">الوقت المحدد (بالدقائق)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  className={`input-field ${errors.timeLimit ? 'border-red-500' : ''}`}\r\n                  {...register('timeLimit', { \r\n                    required: 'الوقت المحدد مطلوب',\r\n                    valueAsNumber: true,\r\n                    min: { value: 1, message: 'الوقت المحدد يجب أن يكون دقيقة واحدة على الأقل' }\r\n                  })}\r\n                />\r\n                {errors.timeLimit && (\r\n                  <p className=\"error-message\">{errors.timeLimit.message}</p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Questions */}\r\n        <div className=\"card\">\r\n          <div className=\"card-header\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">أسئلة الامتحان</h3>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => append({\r\n                  questionImage: '',\r\n                  correctAnswer: 'A',\r\n                  explanation: ''\r\n                })}\r\n                className=\"btn-primary flex items-center space-x-2 rtl:space-x-reverse\"\r\n              >\r\n                <Plus className=\"h-4 w-4\" />\r\n                <span>إضافة سؤال</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <div className=\"space-y-6\">\r\n              {fields.map((field, index) => (\r\n                <div key={field.id} className=\"border border-gray-200 rounded-lg p-4\">\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <h4 className=\"text-lg font-medium text-gray-900\">\r\n                      السؤال {index + 1}\r\n                    </h4>\r\n                    {fields.length > 1 && (\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => remove(index)}\r\n                        className=\"text-red-600 hover:text-red-800 transition-colors\"\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4\" />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Question Image - Full Width */}\r\n                  <div className=\"form-group\">\r\n                    <label className=\"form-label\">صورة السؤال</label>\r\n                    <div className=\"space-y-2\">\r\n                      <input\r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        onChange={(e) => handleImageUpload(e, index)}\r\n                        className=\"input-field\"\r\n                      />\r\n                      {watch(`questions.${index}.questionImage`) && (\r\n                        <div className=\"mt-2 p-4 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300\">\r\n                          <img\r\n                            src={watch(`questions.${index}.questionImage`)}\r\n                            alt={`Question ${index + 1}`}\r\n                            className=\"w-full h-auto rounded-lg border bg-white shadow-sm\"\r\n                            style={{\r\n                              maxHeight: '800px',\r\n                              maxWidth: '100%',\r\n                              objectFit: 'contain',\r\n                              minHeight: '400px',\r\n                              width: '100%'\r\n                            }}\r\n                          />\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Answer Choices - Below Photo */}\r\n                  <div className=\"form-group\">\r\n                    <label className=\"form-label\">الإجابة الصحيحة</label>\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mt-2\">\r\n                      {['A', 'B', 'C', 'D'].map((choice) => (\r\n                        <label\r\n                          key={choice}\r\n                          className={`flex items-center justify-center p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ${\r\n                            watch(`questions.${index}.correctAnswer`) === choice\r\n                              ? 'border-green-500 bg-green-50 text-green-700'\r\n                              : 'border-gray-300 bg-white hover:border-gray-400'\r\n                          }`}\r\n                        >\r\n                          <input\r\n                            type=\"radio\"\r\n                            value={choice}\r\n                            {...register(`questions.${index}.correctAnswer`, {\r\n                              required: 'الإجابة الصحيحة مطلوبة'\r\n                            })}\r\n                            className=\"sr-only\"\r\n                          />\r\n                          <span className=\"text-lg font-semibold\">الخيار {choice}</span>\r\n                        </label>\r\n                      ))}\r\n                    </div>\r\n                    {errors.questions?.[index]?.correctAnswer && (\r\n                      <p className=\"error-message mt-2\">\r\n                        {errors.questions[index].correctAnswer.message}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Explanation */}\r\n                  <div className=\"form-group\">\r\n                    <label className=\"form-label\">توضيح الإجابة (اختياري)</label>\r\n                    <textarea\r\n                      className=\"input-field\"\r\n                      rows=\"2\"\r\n                      {...register(`questions.${index}.explanation`)}\r\n                      placeholder=\"شرح الإجابة الصحيحة...\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Submit Button */}\r\n        <div className=\"flex justify-end space-x-4 rtl:space-x-reverse\">\r\n          {submitting ? (\r\n            <>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setCancelRequest(true)}\r\n                className=\"btn-secondary bg-red-500 hover:bg-red-600 text-white\"\r\n              >\r\n                إلغاء العملية\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                disabled\r\n                className=\"btn-primary flex items-center space-x-2 rtl:space-x-reverse opacity-50\"\r\n              >\r\n                <div className=\"spinner\"></div>\r\n                <span>جاري الحفظ...</span>\r\n              </button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => navigate('/teacher/exams')}\r\n                className=\"btn-secondary\"\r\n              >\r\n                إلغاء\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn-primary flex items-center space-x-2 rtl:space-x-reverse\"\r\n              >\r\n                <Save className=\"h-4 w-4\" />\r\n                <span>حفظ التغييرات</span>\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditExam;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}