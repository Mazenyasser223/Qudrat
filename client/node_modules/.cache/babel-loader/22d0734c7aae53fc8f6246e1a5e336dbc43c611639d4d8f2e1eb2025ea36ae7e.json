{"ast":null,"code":"import _objectSpread from\"M:/Qudrat/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import toast from'react-hot-toast';import{BookOpen,Lock,Unlock,CheckCircle,Clock,Play,RotateCcw,AlertCircle,Eye,TrendingUp,Search,Filter,Grid,List,Plus,History,ChevronDown,ChevronRight}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StudentDashboard=()=>{const navigate=useNavigate();const[examGroups,setExamGroups]=useState([]);const[studentProgress,setStudentProgress]=useState([]);const[reviewExams,setReviewExams]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[selectedGroup,setSelectedGroup]=useState('all');const[viewMode,setViewMode]=useState('grid');const[expandedGroups,setExpandedGroups]=useState({});useEffect(()=>{fetchExamGroups();fetchStudentProgress();fetchReviewExams();// Refresh data every 30 seconds to catch updates from teachers\nconst interval=setInterval(()=>{fetchStudentProgress();},30000);return()=>clearInterval(interval);},[]);const fetchExamGroups=async()=>{try{setLoading(true);const res=await axios.get('/api/exams',{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});const exams=res.data.data;// Group exams by examGroup\nconst groupedExams={};exams.forEach(exam=>{if(!groupedExams[exam.examGroup]){groupedExams[exam.examGroup]=[];}groupedExams[exam.examGroup].push(exam);});// Sort exams within each group by order\nObject.keys(groupedExams).forEach(group=>{groupedExams[group].sort((a,b)=>a.order-b.order);});setExamGroups(groupedExams);}catch(error){console.error('Error fetching exam groups:',error);toast.error('حدث خطأ أثناء تحميل المجموعات');}finally{setLoading(false);}};const fetchStudentProgress=async()=>{try{const res=await axios.get('/api/auth/me',{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});console.log('Student progress fetched:',res.data.user.examProgress);setStudentProgress(res.data.user.examProgress||[]);}catch(error){console.error('Error fetching student progress:',error);}};const fetchReviewExams=async()=>{try{const res=await axios.get('/api/exams/review',{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('token'))}});const reviewExamsData=res.data.data||[];// Group review exams by examGroup\nconst groupedReviewExams={};reviewExamsData.forEach(reviewExam=>{var _reviewExam$originalE;const group=((_reviewExam$originalE=reviewExam.originalExamId)===null||_reviewExam$originalE===void 0?void 0:_reviewExam$originalE.examGroup)||0;if(!groupedReviewExams[group]){groupedReviewExams[group]=[];}groupedReviewExams[group].push(reviewExam);});setReviewExams(groupedReviewExams);}catch(error){console.error('Error fetching review exams:',error);}};const getExamStatus=exam=>{const progress=studentProgress.find(p=>p.examId===exam._id);console.log(\"Exam \".concat(exam.title,\" (\").concat(exam._id,\"):\"),{hasProgress:!!progress,progressStatus:progress===null||progress===void 0?void 0:progress.status,allProgress:studentProgress.map(p=>({examId:p.examId,status:p.status}))});if(!progress)return'locked';// Handle the new status values\nif(progress.status==='locked')return'locked';if(progress.status==='unlocked')return'unlocked';if(progress.status==='completed')return'completed';if(progress.status==='in_progress')return'in_progress';// Default to locked for any other status\nreturn'locked';};const getExamPercentage=exam=>{const progress=studentProgress.find(p=>p.examId===exam._id);return progress?progress.percentage:0;};// Filter and search logic\nconst filteredExams=()=>{let allExams=[];Object.values(examGroups).flat().forEach(exam=>{allExams.push(exam);});// Filter by search term\nif(searchTerm){allExams=allExams.filter(exam=>{var _exam$description;return exam.title.toLowerCase().includes(searchTerm.toLowerCase())||((_exam$description=exam.description)===null||_exam$description===void 0?void 0:_exam$description.toLowerCase().includes(searchTerm.toLowerCase()));});}// Filter by group\nif(selectedGroup!=='all'){allExams=allExams.filter(exam=>exam.examGroup.toString()===selectedGroup);}return allExams;};const groupedExams=()=>{const filtered=filteredExams();const grouped={};filtered.forEach(exam=>{if(!grouped[exam.examGroup]){grouped[exam.examGroup]=[];}grouped[exam.examGroup].push(exam);});// Sort exams within each group by order\nObject.keys(grouped).forEach(group=>{grouped[group].sort((a,b)=>a.order-b.order);});return grouped;};const availableGroups=()=>{const groups=['all'];Object.keys(examGroups).forEach(group=>{if(examGroups[group].length>0){groups.push(group);}});return groups;};const handleStartExam=exam=>{const status=getExamStatus(exam);if(status==='locked'){toast.error('هذا الامتحان مقفل. يجب إكمال الامتحانات السابقة أولاً');return;}if(status==='completed'){// Check if there's a review exam for this completed exam\nconst progress=studentProgress.find(p=>p.examId===exam._id);if(progress&&progress.reviewExamId){navigate(\"/student/review-exam/\".concat(progress.reviewExamId));}else{toast.error('لا يوجد امتحان مراجعة متاح لهذا الامتحان');}return;}// Allow access to 'unlocked' and 'in_progress' exams\nif(status==='unlocked'||status==='in_progress'){navigate(\"/student/exam/\".concat(exam._id));return;}// Default case - should not reach here\ntoast.error('حالة الامتحان غير معروفة');};const toggleGroup=groupKey=>{setExpandedGroups(prev=>_objectSpread(_objectSpread({},prev),{},{[groupKey]:!prev[groupKey]}));};const getStatusIcon=status=>{switch(status){case'completed':return/*#__PURE__*/_jsx(CheckCircle,{className:\"h-5 w-5 text-green-600\"});case'unlocked':return/*#__PURE__*/_jsx(Unlock,{className:\"h-5 w-5 text-blue-600\"});case'in_progress':return/*#__PURE__*/_jsx(Clock,{className:\"h-5 w-5 text-yellow-600\"});case'locked':default:return/*#__PURE__*/_jsx(Lock,{className:\"h-5 w-5 text-gray-400\"});}};const getStatusText=status=>{switch(status){case'completed':return'مكتمل';case'unlocked':return'متاح';case'in_progress':return'قيد التنفيذ';case'locked':default:return'مقفل';}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-primary-600 to-primary-700 rounded-xl p-8 text-white\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-2\",children:\"\\u0644\\u0648\\u062D\\u0629 \\u062A\\u062D\\u0643\\u0645 \\u0627\\u0644\\u0637\\u0627\\u0644\\u0628\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-primary-100 text-lg\",children:\"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0629 \\u0648\\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u0627\\u0644\\u0630\\u064A \\u062A\\u0631\\u064A\\u062F \\u062D\\u0644\\u0647\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col md:flex-row gap-4 items-center justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 max-w-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0627\\u0644\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(Filter,{className:\"h-4 w-4 text-gray-500\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedGroup,onChange:e=>setSelectedGroup(e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"\\u0627\\u062E\\u062A\\u0628\\u0627\\u0631\\u0627\\u062A \\u0627\\u0644\\u062A\\u0623\\u0633\\u064A\\u0633\"}),availableGroups().filter(g=>g!=='all'&&g!=='0').map(group=>/*#__PURE__*/_jsxs(\"option\",{value:group,children:[\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0629 \",group]},group))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1 rtl:space-x-reverse bg-gray-100 rounded-lg p-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewMode('list'),className:\"p-2 rounded-md transition-colors \".concat(viewMode==='list'?'bg-white shadow-sm text-primary-600':'text-gray-500 hover:text-gray-700'),children:/*#__PURE__*/_jsx(List,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setViewMode('grid'),className:\"p-2 rounded-md transition-colors \".concat(viewMode==='grid'?'bg-white shadow-sm text-primary-600':'text-gray-500 hover:text-gray-700'),children:/*#__PURE__*/_jsx(Grid,{className:\"h-4 w-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-sm text-gray-600\",children:[\"\\u0639\\u0631\\u0636 \",filteredExams().length,\" \\u0645\\u0646 \",Object.values(examGroups).flat().length,\" \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\"]})]})}),viewMode==='grid'?/*#__PURE__*//* Grid View */_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",children:Object.keys(groupedExams()).length===0?/*#__PURE__*/_jsx(\"div\",{className:\"col-span-full\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 bg-white rounded-xl shadow-sm border\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"h-16 w-16 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-6\",children:searchTerm?'لم يتم العثور على امتحانات تطابق البحث':'لا توجد امتحانات متاحة حالياً'})]})}):Object.entries(groupedExams()).map(_ref=>{let[groupNumber,groupExams]=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 \".concat(groupNumber==='0'?'bg-gradient-to-r from-primary-500 to-primary-600 text-white':'bg-gradient-to-r from-gray-50 to-gray-100 border-b'),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold \".concat(groupNumber==='0'?'text-white':'text-gray-900'),children:groupNumber==='0'?'اختبارات التأسيس':\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0629 \".concat(groupNumber)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm \".concat(groupNumber==='0'?'text-primary-100':'text-gray-600'),children:[groupExams.length,\" \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 space-y-3\",children:groupExams.map(exam=>{const status=getExamStatus(exam);const progress=studentProgress.find(p=>p.examId===exam._id);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg border transition-all duration-200 cursor-pointer \".concat(status==='completed'?'bg-gradient-to-r from-green-50 to-green-100 border-green-200 hover:shadow-md':status==='unlocked'?'bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200 hover:shadow-md':status==='in_progress'?'bg-gradient-to-r from-yellow-50 to-yellow-100 border-yellow-200 hover:shadow-md':'bg-gradient-to-r from-gray-50 to-gray-100 border-gray-200 opacity-75'),onClick:()=>handleStartExam(exam),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 rtl:space-x-reverse\",children:[getStatusIcon(status),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium \".concat(status==='completed'?'text-green-700':status==='unlocked'?'text-blue-700':status==='in_progress'?'text-yellow-700':'text-gray-500'),children:getStatusText(status)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[exam.totalQuestions,\" \\u0623\\u0633\\u0626\\u0644\\u0629 \\u2022 \",exam.timeLimit,\" \\u062F\\u0642\\u064A\\u0642\\u0629\"]})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 mb-2 text-sm\",children:exam.title}),status==='completed'&&progress&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u0627\\u0644\\u062F\\u0631\\u062C\\u0629:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-green-600\",children:[progress.score,\"/\",exam.totalQuestions,\" (\",progress.percentage.toFixed(2),\"%)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-2 rounded-full \".concat(progress.percentage>=80?'bg-green-500':progress.percentage>=60?'bg-blue-500':'bg-orange-500'),style:{width:\"\".concat(progress.percentage,\"%\")}})}),progress.reviewExamId&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mt-2\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:e=>{e.stopPropagation();navigate(\"/student/review-exam/\".concat(progress.reviewExamId));},className:\"flex items-center space-x-1 rtl:space-x-reverse px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium hover:bg-purple-200 transition-colors\",children:[/*#__PURE__*/_jsx(RotateCcw,{className:\"h-3 w-3\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u0627\\u0644\\u0645\\u0631\\u0627\\u062C\\u0639\\u0629\"})]})})]}),status==='unlocked'&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mt-2\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center space-x-1 rtl:space-x-reverse px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium hover:bg-blue-200 transition-colors\",children:[/*#__PURE__*/_jsx(Play,{className:\"h-3 w-3\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0628\\u062F\\u0621 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\"})]})}),status==='in_progress'&&progress&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-600\",children:\"\\u0627\\u0644\\u062A\\u0642\\u062F\\u0645:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-yellow-600\",children:[progress.score||0,\"/\",exam.totalQuestions]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-2 rounded-full bg-yellow-500\",style:{width:\"\".concat((progress.score||0)/exam.totalQuestions*100,\"%\")}})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mt-2\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center space-x-1 rtl:space-x-reverse px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium hover:bg-yellow-200 transition-colors\",children:[/*#__PURE__*/_jsx(Play,{className:\"h-3 w-3\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0645\\u062A\\u0627\\u0628\\u0639\\u0629 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\"})]})})]}),status==='locked'&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mt-2\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center space-x-1 rtl:space-x-reverse px-3 py-1 bg-gray-100 text-gray-500 rounded-full text-xs font-medium\",children:[/*#__PURE__*/_jsx(Lock,{className:\"h-3 w-3\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0645\\u0642\\u0641\\u0644\"})]})})]},exam._id);})})]},groupNumber);})}):/*#__PURE__*//* List View */_jsx(\"div\",{className:\"space-y-6\",children:Object.keys(groupedExams()).length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12 bg-white rounded-xl shadow-sm border\",children:[/*#__PURE__*/_jsx(BookOpen,{className:\"h-16 w-16 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-6\",children:searchTerm?'لم يتم العثور على امتحانات تطابق البحث':'لا توجد امتحانات متاحة حالياً'})]}):Object.entries(groupedExams()).map(_ref2=>{let[groupNumber,groupExams]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-sm border overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 \".concat(groupNumber==='0'?'bg-gradient-to-r from-primary-500 to-primary-600 text-white':'bg-gradient-to-r from-gray-50 to-gray-100 border-b'),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold \".concat(groupNumber==='0'?'text-white':'text-gray-900'),children:groupNumber==='0'?'اختبارات التأسيس':\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0629 \".concat(groupNumber)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm \".concat(groupNumber==='0'?'text-primary-100':'text-gray-600'),children:[groupExams.length,\" \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u062F\\u0631\\u062C\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"divide-y divide-gray-200\",children:groupExams.map((exam,index)=>{const status=getExamStatus(exam);const progress=studentProgress.find(p=>p.examId===exam._id);return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 cursor-pointer\",onClick:()=>handleStartExam(exam),children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 rtl:space-x-reverse\",children:[getStatusIcon(status),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:exam.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[exam.totalQuestions,\" \\u0623\\u0633\\u0626\\u0644\\u0629 \\u2022 \",exam.timeLimit,\" \\u062F\\u0642\\u064A\\u0642\\u0629\"]})]})]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900\",children:groupNumber==='0'?'اختبارات التأسيس':\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0629 \".concat(groupNumber)}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[\"\\u062A\\u0631\\u062A\\u064A\\u0628: \",exam.order]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(status==='completed'?'bg-green-100 text-green-800':status==='unlocked'?'bg-blue-100 text-blue-800':status==='in_progress'?'bg-yellow-100 text-yellow-800':'bg-gray-100 text-gray-800'),children:getStatusText(status)})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:status==='completed'&&progress?/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-900\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium\",children:[progress.score,\"/\",exam.totalQuestions]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[progress.percentage.toFixed(2),\"%\"]})]}):status==='in_progress'&&progress?/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-900\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium\",children:[progress.score||0,\"/\",exam.totalQuestions]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"\\u0642\\u064A\\u062F \\u0627\\u0644\\u062A\\u0646\\u0641\\u064A\\u0630\"})]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500\",children:\"-\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:status==='completed'&&progress!==null&&progress!==void 0&&progress.reviewExamId?/*#__PURE__*/_jsxs(\"button\",{onClick:e=>{e.stopPropagation();navigate(\"/student/review-exam/\".concat(progress.reviewExamId));},className:\"text-purple-600 hover:text-purple-900 flex items-center space-x-1 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(RotateCcw,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0645\\u0631\\u0627\\u062C\\u0639\\u0629\"})]}):status==='unlocked'||status==='in_progress'?/*#__PURE__*/_jsxs(\"button\",{className:\"text-blue-600 hover:text-blue-900 flex items-center space-x-1 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(Play,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0628\\u062F\\u0621\"})]}):/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-400 flex items-center space-x-1 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(Lock,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0645\\u0642\\u0641\\u0644\"})]})})]},exam._id);})})]})})]},groupNumber);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 flex items-center space-x-2 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(History,{className:\"h-5 w-5 text-primary-600\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0633\\u062C\\u0644 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"\\u0639\\u0631\\u0636 \\u0646\\u062A\\u0627\\u0626\\u062C \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0633\\u0627\\u0628\\u0642\\u0629 \\u0645\\u0639 \\u0625\\u0645\\u0643\\u0627\\u0646\\u064A\\u0629 \\u0627\\u0644\\u0648\\u0635\\u0648\\u0644 \\u0627\\u0644\\u0633\\u0631\\u064A\\u0639\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full\",children:[studentProgress.filter(p=>p.status==='completed').length,\" \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u0645\\u0643\\u062A\\u0645\\u0644\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:studentProgress.filter(p=>p.status==='completed').length>0?/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:Object.keys(examGroups).map(groupKey=>{const groupNum=parseInt(groupKey);const groupExams=examGroups[groupKey]||[];const completedExams=groupExams.filter(exam=>{const progress=studentProgress.find(p=>p.examId===exam._id&&p.status==='completed');return progress;});if(completedExams.length===0)return null;const isExpanded=expandedGroups[groupKey];// Calculate group statistics\nconst groupProgress=completedExams.map(exam=>studentProgress.find(p=>p.examId===exam._id&&p.status==='completed'));const avgScore=groupProgress.length>0?Math.round(groupProgress.reduce((sum,p)=>sum+(p.percentage||0),0)/groupProgress.length):0;return/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>toggleGroup(groupKey),className:\"w-full p-4 bg-gradient-to-r from-green-50 to-blue-50 hover:from-green-100 hover:to-blue-100 transition-all duration-200 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold\",children:groupNum}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-gray-900 text-sm\",children:groupNum===0?'اختبارات التأسيس':\"\\u0627\\u0644\\u0645\\u062C\\u0645\\u0648\\u0639\\u0629 \".concat(groupNum)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-600\",children:[completedExams.length,\" \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u0645\\u0643\\u062A\\u0645\\u0644\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 rtl:space-x-reverse\",children:[avgScore>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-1 rounded-full text-sm font-bold \".concat(avgScore>=80?'bg-green-100 text-green-700':avgScore>=60?'bg-blue-100 text-blue-700':'bg-orange-100 text-orange-700'),children:[avgScore,\"%\"]}),isExpanded?/*#__PURE__*/_jsx(ChevronDown,{className:\"h-5 w-5 text-gray-500\"}):/*#__PURE__*/_jsx(ChevronRight,{className:\"h-5 w-5 text-gray-500\"})]})]}),isExpanded&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-white border-t border-gray-200\",children:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:completedExams.map(exam=>{const progress=studentProgress.find(p=>p.examId===exam._id&&p.status==='completed');return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors cursor-pointer\",onClick:()=>navigate(\"/student/exam-history/\".concat(exam._id)),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 rtl:space-x-reverse mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-2 bg-green-100 rounded-lg\",children:/*#__PURE__*/_jsx(CheckCircle,{className:\"h-4 w-4 text-green-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold text-gray-900 text-sm\",children:exam.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-600\",children:[exam.totalQuestions,\" \\u0623\\u0633\\u0626\\u0644\\u0629\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-3 mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-green-600\",children:[progress.score,\"/\",exam.totalQuestions]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"\\u0627\\u0644\\u062F\\u0631\\u062C\\u0629\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-blue-600\",children:[progress.percentage.toFixed(2),\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"\\u0627\\u0644\\u0646\\u0633\\u0628\\u0629\"})]}),progress.timeSpent&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold text-purple-600\",children:[Math.floor(progress.timeSpent/60),\":\",(progress.timeSpent%60).toString().padStart(2,'0')]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"\\u0627\\u0644\\u0648\\u0642\\u062A \\u0627\\u0644\\u0645\\u0633\\u062A\\u063A\\u0631\\u0642\"})]}),progress.submittedAt&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-lg font-bold text-orange-600\",children:new Date(progress.submittedAt).toLocaleDateString('en-GB')}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u0625\\u0631\\u0633\\u0627\\u0644\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center space-y-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-1 rounded-full text-xs font-medium \".concat(progress.percentage>=80?'bg-green-100 text-green-700':progress.percentage>=60?'bg-blue-100 text-blue-700':'bg-orange-100 text-orange-700'),children:progress.percentage>=80?'ممتاز':progress.percentage>=60?'جيد':'مقبول'}),progress.reviewExamId&&/*#__PURE__*/_jsxs(\"button\",{onClick:e=>{e.stopPropagation();navigate(\"/student/review-exam/\".concat(progress.reviewExamId));},className:\"flex items-center space-x-1 rtl:space-x-reverse px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium hover:bg-purple-200 transition-colors\",children:[/*#__PURE__*/_jsx(RotateCcw,{className:\"h-3 w-3\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646 \\u0627\\u0644\\u0645\\u0631\\u0627\\u062C\\u0639\\u0629\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"flex items-center space-x-1 rtl:space-x-reverse px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium hover:bg-gray-200 transition-colors\",children:[/*#__PURE__*/_jsx(Eye,{className:\"h-3 w-3\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0639\\u0631\\u0636 \\u0627\\u0644\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644\"})]})]})]})},exam._id);})})})]},groupKey);})}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-gray-100 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center\",children:/*#__PURE__*/_jsx(History,{className:\"h-10 w-10 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A \\u0645\\u0643\\u062A\\u0645\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"\\u0627\\u0628\\u062F\\u0623 \\u0628\\u062D\\u0644 \\u0627\\u0644\\u0627\\u0645\\u062A\\u062D\\u0627\\u0646\\u0627\\u062A \\u0644\\u062A\\u0631\\u0649 \\u0633\\u062C\\u0644 \\u0627\\u0644\\u0646\\u062A\\u0627\\u0626\\u062C \\u0647\\u0646\\u0627\"})]})})]})]});};export default StudentDashboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","toast","BookOpen","Lock","Unlock","CheckCircle","Clock","Play","RotateCcw","AlertCircle","Eye","TrendingUp","Search","Filter","Grid","List","Plus","History","ChevronDown","ChevronRight","jsx","_jsx","jsxs","_jsxs","StudentDashboard","navigate","examGroups","setExamGroups","studentProgress","setStudentProgress","reviewExams","setReviewExams","loading","setLoading","searchTerm","setSearchTerm","selectedGroup","setSelectedGroup","viewMode","setViewMode","expandedGroups","setExpandedGroups","fetchExamGroups","fetchStudentProgress","fetchReviewExams","interval","setInterval","clearInterval","res","get","headers","concat","localStorage","getItem","exams","data","groupedExams","forEach","exam","examGroup","push","Object","keys","group","sort","a","b","order","error","console","log","user","examProgress","reviewExamsData","groupedReviewExams","reviewExam","_reviewExam$originalE","originalExamId","getExamStatus","progress","find","p","examId","_id","title","hasProgress","progressStatus","status","allProgress","map","getExamPercentage","percentage","filteredExams","allExams","values","flat","filter","_exam$description","toLowerCase","includes","description","toString","filtered","grouped","availableGroups","groups","length","handleStartExam","reviewExamId","toggleGroup","groupKey","prev","_objectSpread","getStatusIcon","className","getStatusText","children","type","placeholder","value","onChange","e","target","g","onClick","entries","_ref","groupNumber","groupExams","totalQuestions","timeLimit","score","toFixed","style","width","stopPropagation","_ref2","index","groupNum","parseInt","completedExams","isExpanded","groupProgress","avgScore","Math","round","reduce","sum","timeSpent","floor","padStart","submittedAt","Date","toLocaleDateString"],"sources":["M:/Qudrat/client/src/pages/Student/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport toast from 'react-hot-toast';\r\nimport { BookOpen, Lock, Unlock, CheckCircle, Clock, Play, RotateCcw, AlertCircle, Eye, TrendingUp, Search, Filter, Grid, List, Plus, History, ChevronDown, ChevronRight } from 'lucide-react';\r\n\r\nconst StudentDashboard = () => {\r\n  const navigate = useNavigate();\r\n  const [examGroups, setExamGroups] = useState([]);\r\n  const [studentProgress, setStudentProgress] = useState([]);\r\n  const [reviewExams, setReviewExams] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [selectedGroup, setSelectedGroup] = useState('all');\r\n  const [viewMode, setViewMode] = useState('grid');\r\n  const [expandedGroups, setExpandedGroups] = useState({});\r\n\r\n  useEffect(() => {\r\n    fetchExamGroups();\r\n    fetchStudentProgress();\r\n    fetchReviewExams();\r\n    \r\n    // Refresh data every 30 seconds to catch updates from teachers\r\n    const interval = setInterval(() => {\r\n      fetchStudentProgress();\r\n    }, 30000);\r\n    \r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const fetchExamGroups = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get('/api/exams', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      const exams = res.data.data;\r\n\r\n      // Group exams by examGroup\r\n      const groupedExams = {};\r\n      exams.forEach(exam => {\r\n        if (!groupedExams[exam.examGroup]) {\r\n          groupedExams[exam.examGroup] = [];\r\n        }\r\n        groupedExams[exam.examGroup].push(exam);\r\n      });\r\n\r\n      // Sort exams within each group by order\r\n      Object.keys(groupedExams).forEach(group => {\r\n        groupedExams[group].sort((a, b) => a.order - b.order);\r\n      });\r\n\r\n      setExamGroups(groupedExams);\r\n    } catch (error) {\r\n      console.error('Error fetching exam groups:', error);\r\n      toast.error('حدث خطأ أثناء تحميل المجموعات');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchStudentProgress = async () => {\r\n    try {\r\n      const res = await axios.get('/api/auth/me', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      console.log('Student progress fetched:', res.data.user.examProgress);\r\n      setStudentProgress(res.data.user.examProgress || []);\r\n    } catch (error) {\r\n      console.error('Error fetching student progress:', error);\r\n    }\r\n  };\r\n\r\n  const fetchReviewExams = async () => {\r\n    try {\r\n      const res = await axios.get('/api/exams/review', {\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        }\r\n      });\r\n      const reviewExamsData = res.data.data || [];\r\n      \r\n      // Group review exams by examGroup\r\n      const groupedReviewExams = {};\r\n      reviewExamsData.forEach(reviewExam => {\r\n        const group = reviewExam.originalExamId?.examGroup || 0;\r\n        if (!groupedReviewExams[group]) {\r\n          groupedReviewExams[group] = [];\r\n        }\r\n        groupedReviewExams[group].push(reviewExam);\r\n      });\r\n      \r\n      setReviewExams(groupedReviewExams);\r\n    } catch (error) {\r\n      console.error('Error fetching review exams:', error);\r\n    }\r\n  };\r\n\r\n  const getExamStatus = (exam) => {\r\n    const progress = studentProgress.find(p => p.examId === exam._id);\r\n    console.log(`Exam ${exam.title} (${exam._id}):`, {\r\n      hasProgress: !!progress,\r\n      progressStatus: progress?.status,\r\n      allProgress: studentProgress.map(p => ({ examId: p.examId, status: p.status }))\r\n    });\r\n    \r\n    if (!progress) return 'locked';\r\n    \r\n    // Handle the new status values\r\n    if (progress.status === 'locked') return 'locked';\r\n    if (progress.status === 'unlocked') return 'unlocked';\r\n    if (progress.status === 'completed') return 'completed';\r\n    if (progress.status === 'in_progress') return 'in_progress';\r\n    \r\n    // Default to locked for any other status\r\n    return 'locked';\r\n  };\r\n\r\n  const getExamPercentage = (exam) => {\r\n    const progress = studentProgress.find(p => p.examId === exam._id);\r\n    return progress ? progress.percentage : 0;\r\n  };\r\n\r\n  // Filter and search logic\r\n  const filteredExams = () => {\r\n    let allExams = [];\r\n    Object.values(examGroups).flat().forEach(exam => {\r\n      allExams.push(exam);\r\n    });\r\n\r\n    // Filter by search term\r\n    if (searchTerm) {\r\n      allExams = allExams.filter(exam => \r\n        exam.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        exam.description?.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    }\r\n\r\n    // Filter by group\r\n    if (selectedGroup !== 'all') {\r\n      allExams = allExams.filter(exam => exam.examGroup.toString() === selectedGroup);\r\n    }\r\n\r\n    return allExams;\r\n  };\r\n\r\n  const groupedExams = () => {\r\n    const filtered = filteredExams();\r\n    const grouped = {};\r\n    \r\n    filtered.forEach(exam => {\r\n      if (!grouped[exam.examGroup]) {\r\n        grouped[exam.examGroup] = [];\r\n      }\r\n      grouped[exam.examGroup].push(exam);\r\n    });\r\n\r\n    // Sort exams within each group by order\r\n    Object.keys(grouped).forEach(group => {\r\n      grouped[group].sort((a, b) => a.order - b.order);\r\n    });\r\n\r\n    return grouped;\r\n  };\r\n\r\n  const availableGroups = () => {\r\n    const groups = ['all'];\r\n    Object.keys(examGroups).forEach(group => {\r\n      if (examGroups[group].length > 0) {\r\n        groups.push(group);\r\n      }\r\n    });\r\n    return groups;\r\n  };\r\n\r\n  const handleStartExam = (exam) => {\r\n    const status = getExamStatus(exam);\r\n    \r\n    if (status === 'locked') {\r\n      toast.error('هذا الامتحان مقفل. يجب إكمال الامتحانات السابقة أولاً');\r\n      return;\r\n    }\r\n    \r\n    if (status === 'completed') {\r\n      // Check if there's a review exam for this completed exam\r\n      const progress = studentProgress.find(p => p.examId === exam._id);\r\n      if (progress && progress.reviewExamId) {\r\n        navigate(`/student/review-exam/${progress.reviewExamId}`);\r\n      } else {\r\n        toast.error('لا يوجد امتحان مراجعة متاح لهذا الامتحان');\r\n      }\r\n      return;\r\n    }\r\n    \r\n    // Allow access to 'unlocked' and 'in_progress' exams\r\n    if (status === 'unlocked' || status === 'in_progress') {\r\n      navigate(`/student/exam/${exam._id}`);\r\n      return;\r\n    }\r\n    \r\n    // Default case - should not reach here\r\n    toast.error('حالة الامتحان غير معروفة');\r\n  };\r\n\r\n  const toggleGroup = (groupKey) => {\r\n    setExpandedGroups(prev => ({\r\n      ...prev,\r\n      [groupKey]: !prev[groupKey]\r\n    }));\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return <CheckCircle className=\"h-5 w-5 text-green-600\" />;\r\n      case 'unlocked':\r\n        return <Unlock className=\"h-5 w-5 text-blue-600\" />;\r\n      case 'in_progress':\r\n        return <Clock className=\"h-5 w-5 text-yellow-600\" />;\r\n      case 'locked':\r\n      default:\r\n        return <Lock className=\"h-5 w-5 text-gray-400\" />;\r\n    }\r\n  };\r\n\r\n  const getStatusText = (status) => {\r\n    switch (status) {\r\n      case 'completed':\r\n        return 'مكتمل';\r\n      case 'unlocked':\r\n        return 'متاح';\r\n      case 'in_progress':\r\n        return 'قيد التنفيذ';\r\n      case 'locked':\r\n      default:\r\n        return 'مقفل';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"spinner\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header Section */}\r\n      <div className=\"bg-gradient-to-r from-primary-600 to-primary-700 rounded-xl p-8 text-white\">\r\n        <div className=\"flex items-center justify-between\">\r\n      <div>\r\n            <h1 className=\"text-4xl font-bold mb-2\">لوحة تحكم الطالب</h1>\r\n            <p className=\"text-primary-100 text-lg\">اختر المجموعة والامتحان الذي تريد حله</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Search and Filter Section */}\r\n      <div className=\"card\">\r\n        <div className=\"card-body\">\r\n          <div className=\"flex flex-col md:flex-row gap-4 items-center justify-between\">\r\n            {/* Search Input */}\r\n            <div className=\"flex-1 max-w-md\">\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4\" />\r\n                <input\r\n                  type=\"text\"\r\n                  placeholder=\"البحث في الامتحانات...\"\r\n                  value={searchTerm}\r\n                  onChange={(e) => setSearchTerm(e.target.value)}\r\n                  className=\"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Group Filter */}\r\n            <div className=\"flex items-center space-x-2 rtl:space-x-reverse\">\r\n              <Filter className=\"h-4 w-4 text-gray-500\" />\r\n              <select\r\n                value={selectedGroup}\r\n                onChange={(e) => setSelectedGroup(e.target.value)}\r\n                className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\r\n              >\r\n                <option value=\"all\">جميع المجموعات</option>\r\n                <option value=\"0\">اختبارات التأسيس</option>\r\n                {availableGroups().filter(g => g !== 'all' && g !== '0').map(group => (\r\n                  <option key={group} value={group}>المجموعة {group}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* View Mode Toggle */}\r\n            <div className=\"flex items-center space-x-1 rtl:space-x-reverse bg-gray-100 rounded-lg p-1\">\r\n              <button\r\n                onClick={() => setViewMode('list')}\r\n                className={`p-2 rounded-md transition-colors ${\r\n                  viewMode === 'list' \r\n                    ? 'bg-white shadow-sm text-primary-600' \r\n                    : 'text-gray-500 hover:text-gray-700'\r\n                }`}\r\n              >\r\n                <List className=\"h-4 w-4\" />\r\n              </button>\r\n              <button\r\n                onClick={() => setViewMode('grid')}\r\n                className={`p-2 rounded-md transition-colors ${\r\n                  viewMode === 'grid' \r\n                    ? 'bg-white shadow-sm text-primary-600' \r\n                    : 'text-gray-500 hover:text-gray-700'\r\n                }`}\r\n              >\r\n                <Grid className=\"h-4 w-4\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Results Count */}\r\n          <div className=\"mt-4 text-sm text-gray-600\">\r\n            عرض {filteredExams().length} من {Object.values(examGroups).flat().length} امتحان\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Exams Display */}\r\n      {viewMode === 'grid' ? (\r\n        /* Grid View */\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n          {Object.keys(groupedExams()).length === 0 ? (\r\n            <div className=\"col-span-full\">\r\n              <div className=\"text-center py-12 bg-white rounded-xl shadow-sm border\">\r\n                <BookOpen className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\r\n                <h3 className=\"text-lg font-medium text-gray-900 mb-2\">لا توجد امتحانات</h3>\r\n                <p className=\"text-gray-500 mb-6\">\r\n                  {searchTerm ? 'لم يتم العثور على امتحانات تطابق البحث' : 'لا توجد امتحانات متاحة حالياً'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            Object.entries(groupedExams()).map(([groupNumber, groupExams]) => (\r\n              <div key={groupNumber} className=\"bg-white rounded-xl shadow-sm border overflow-hidden\">\r\n                {/* Group Header */}\r\n                <div className={`p-4 ${\r\n                  groupNumber === '0' \r\n                    ? 'bg-gradient-to-r from-primary-500 to-primary-600 text-white' \r\n                    : 'bg-gradient-to-r from-gray-50 to-gray-100 border-b'\r\n                }`}>\r\n                  <h3 className={`text-lg font-semibold ${\r\n                    groupNumber === '0' ? 'text-white' : 'text-gray-900'\r\n                  }`}>\r\n                    {groupNumber === '0' ? 'اختبارات التأسيس' : `المجموعة ${groupNumber}`}\r\n                  </h3>\r\n                  <p className={`text-sm ${\r\n                    groupNumber === '0' ? 'text-primary-100' : 'text-gray-600'\r\n                  }`}>\r\n                    {groupExams.length} امتحان\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Group Exams */}\r\n                <div className=\"p-4 space-y-3\">\r\n                  {groupExams.map((exam) => {\r\n                    const status = getExamStatus(exam);\r\n                    const progress = studentProgress.find(p => p.examId === exam._id);\r\n                    \r\n                    return (\r\n                      <div\r\n                        key={exam._id}\r\n                        className={`p-4 rounded-lg border transition-all duration-200 cursor-pointer ${\r\n                          status === 'completed' \r\n                            ? 'bg-gradient-to-r from-green-50 to-green-100 border-green-200 hover:shadow-md' \r\n                            : status === 'unlocked'\r\n                            ? 'bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200 hover:shadow-md' \r\n                            : status === 'in_progress'\r\n                            ? 'bg-gradient-to-r from-yellow-50 to-yellow-100 border-yellow-200 hover:shadow-md'\r\n                            : 'bg-gradient-to-r from-gray-50 to-gray-100 border-gray-200 opacity-75'\r\n                        }`}\r\n                        onClick={() => handleStartExam(exam)}\r\n                      >\r\n                        <div className=\"flex items-center justify-between mb-3\">\r\n                          <div className=\"flex items-center space-x-2 rtl:space-x-reverse\">\r\n                            {getStatusIcon(status)}\r\n                            <span className={`text-sm font-medium ${\r\n                              status === 'completed' ? 'text-green-700' :\r\n                              status === 'unlocked' ? 'text-blue-700' :\r\n                              status === 'in_progress' ? 'text-yellow-700' :\r\n                              'text-gray-500'\r\n                            }`}>\r\n                              {getStatusText(status)}\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"text-xs text-gray-500\">\r\n                            {exam.totalQuestions} أسئلة • {exam.timeLimit} دقيقة\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        <h4 className=\"font-semibold text-gray-900 mb-2 text-sm\">\r\n                          {exam.title}\r\n                        </h4>\r\n                        \r\n                        {status === 'completed' && progress && (\r\n                          <div className=\"space-y-2\">\r\n                            <div className=\"flex items-center justify-between text-xs\">\r\n                              <span className=\"text-gray-600\">الدرجة:</span>\r\n                              <span className=\"font-semibold text-green-600\">\r\n                                {progress.score}/{exam.totalQuestions} ({progress.percentage.toFixed(2)}%)\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                              <div \r\n                                className={`h-2 rounded-full ${\r\n                                  progress.percentage >= 80 ? 'bg-green-500' :\r\n                                  progress.percentage >= 60 ? 'bg-blue-500' :\r\n                                  'bg-orange-500'\r\n                                }`}\r\n                                style={{ width: `${progress.percentage}%` }}\r\n                              ></div>\r\n                            </div>\r\n                            {progress.reviewExamId && (\r\n                              <div className=\"flex items-center justify-center mt-2\">\r\n                          <button\r\n                                  onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    navigate(`/student/review-exam/${progress.reviewExamId}`);\r\n                                  }}\r\n                                  className=\"flex items-center space-x-1 rtl:space-x-reverse px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium hover:bg-purple-200 transition-colors\"\r\n                                >\r\n                                  <RotateCcw className=\"h-3 w-3\" />\r\n                                  <span>امتحان المراجعة</span>\r\n                                </button>\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                        \r\n                        {status === 'unlocked' && (\r\n                          <div className=\"flex items-center justify-center mt-2\">\r\n                            <button className=\"flex items-center space-x-1 rtl:space-x-reverse px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium hover:bg-blue-200 transition-colors\">\r\n                              <Play className=\"h-3 w-3\" />\r\n                              <span>بدء الامتحان</span>\r\n                            </button>\r\n                          </div>\r\n                        )}\r\n                        \r\n                        {status === 'in_progress' && progress && (\r\n                          <div className=\"space-y-2\">\r\n                            <div className=\"flex items-center justify-between text-xs\">\r\n                              <span className=\"text-gray-600\">التقدم:</span>\r\n                              <span className=\"font-semibold text-yellow-600\">\r\n                                {progress.score || 0}/{exam.totalQuestions}\r\n                              </span>\r\n                            </div>\r\n                            <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                              <div \r\n                                className=\"h-2 rounded-full bg-yellow-500\"\r\n                                style={{ width: `${((progress.score || 0) / exam.totalQuestions) * 100}%` }}\r\n                              ></div>\r\n                            </div>\r\n                            <div className=\"flex items-center justify-center mt-2\">\r\n                              <button className=\"flex items-center space-x-1 rtl:space-x-reverse px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-medium hover:bg-yellow-200 transition-colors\">\r\n                                <Play className=\"h-3 w-3\" />\r\n                                <span>متابعة الامتحان</span>\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                        \r\n                        {status === 'locked' && (\r\n                          <div className=\"flex items-center justify-center mt-2\">\r\n                            <span className=\"flex items-center space-x-1 rtl:space-x-reverse px-3 py-1 bg-gray-100 text-gray-500 rounded-full text-xs font-medium\">\r\n                              <Lock className=\"h-3 w-3\" />\r\n                              <span>مقفل</span>\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n                </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      ) : (\r\n        /* List View */\r\n        <div className=\"space-y-6\">\r\n          {Object.keys(groupedExams()).length === 0 ? (\r\n            <div className=\"text-center py-12 bg-white rounded-xl shadow-sm border\">\r\n              <BookOpen className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">لا توجد امتحانات</h3>\r\n              <p className=\"text-gray-500 mb-6\">\r\n                {searchTerm ? 'لم يتم العثور على امتحانات تطابق البحث' : 'لا توجد امتحانات متاحة حالياً'}\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            Object.entries(groupedExams()).map(([groupNumber, groupExams]) => (\r\n              <div key={groupNumber} className=\"bg-white rounded-xl shadow-sm border overflow-hidden\">\r\n                {/* Group Header */}\r\n                <div className={`p-4 ${\r\n                  groupNumber === '0' \r\n                    ? 'bg-gradient-to-r from-primary-500 to-primary-600 text-white' \r\n                    : 'bg-gradient-to-r from-gray-50 to-gray-100 border-b'\r\n                }`}>\r\n                  <h3 className={`text-lg font-semibold ${\r\n                    groupNumber === '0' ? 'text-white' : 'text-gray-900'\r\n                  }`}>\r\n                    {groupNumber === '0' ? 'اختبارات التأسيس' : `المجموعة ${groupNumber}`}\r\n                  </h3>\r\n                  <p className={`text-sm ${\r\n                    groupNumber === '0' ? 'text-primary-100' : 'text-gray-600'\r\n                  }`}>\r\n                    {groupExams.length} امتحان\r\n                  </p>\r\n      </div>\r\n\r\n                {/* Group Exams Table */}\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"w-full\">\r\n                    <thead className=\"bg-gray-50\">\r\n                      <tr>\r\n                        <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">الامتحان</th>\r\n                        <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">التفاصيل</th>\r\n                        <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">الحالة</th>\r\n                        <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">الدرجة</th>\r\n                        <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">الإجراء</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"divide-y divide-gray-200\">\r\n                      {groupExams.map((exam, index) => {\r\n                        const status = getExamStatus(exam);\r\n                        const progress = studentProgress.find(p => p.examId === exam._id);\r\n                        \r\n                        return (\r\n                          <tr key={exam._id} className=\"hover:bg-gray-50 cursor-pointer\" onClick={() => handleStartExam(exam)}>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                              <div className=\"flex items-center space-x-3 rtl:space-x-reverse\">\r\n                                {getStatusIcon(status)}\r\n                                <div>\r\n                                  <div className=\"text-sm font-medium text-gray-900\">{exam.title}</div>\r\n                                  <div className=\"text-sm text-gray-500\">{exam.totalQuestions} أسئلة • {exam.timeLimit} دقيقة</div>\r\n                    </div>\r\n                    </div>\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                              <div className=\"text-sm text-gray-900\">\r\n                                {groupNumber === '0' ? 'اختبارات التأسيس' : `المجموعة ${groupNumber}`}\r\n                    </div>\r\n                              <div className=\"text-sm text-gray-500\">ترتيب: {exam.order}</div>\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                              <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n                                status === 'completed' \r\n                                  ? 'bg-green-100 text-green-800' \r\n                                  : status === 'unlocked' \r\n                                  ? 'bg-blue-100 text-blue-800' \r\n                                  : status === 'in_progress'\r\n                                  ? 'bg-yellow-100 text-yellow-800'\r\n                                  : 'bg-gray-100 text-gray-800'\r\n                              }`}>\r\n                                {getStatusText(status)}\r\n                              </span>\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                              {status === 'completed' && progress ? (\r\n                                <div className=\"text-sm text-gray-900\">\r\n                                  <div className=\"font-medium\">{progress.score}/{exam.totalQuestions}</div>\r\n                                  <div className=\"text-xs text-gray-500\">{progress.percentage.toFixed(2)}%</div>\r\n                  </div>\r\n                              ) : status === 'in_progress' && progress ? (\r\n                                <div className=\"text-sm text-gray-900\">\r\n                                  <div className=\"font-medium\">{progress.score || 0}/{exam.totalQuestions}</div>\r\n                                  <div className=\"text-xs text-gray-500\">قيد التنفيذ</div>\r\n                    </div>\r\n                              ) : (\r\n                                <span className=\"text-sm text-gray-500\">-</span>\r\n                  )}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                              {status === 'completed' && progress?.reviewExamId ? (\r\n                  <button\r\n                                  onClick={(e) => {\r\n                                    e.stopPropagation();\r\n                                    navigate(`/student/review-exam/${progress.reviewExamId}`);\r\n                                  }}\r\n                                  className=\"text-purple-600 hover:text-purple-900 flex items-center space-x-1 rtl:space-x-reverse\"\r\n                                >\r\n                                  <RotateCcw className=\"h-4 w-4\" />\r\n                                  <span>مراجعة</span>\r\n                                </button>\r\n                              ) : status === 'unlocked' || status === 'in_progress' ? (\r\n                                <button className=\"text-blue-600 hover:text-blue-900 flex items-center space-x-1 rtl:space-x-reverse\">\r\n                                  <Play className=\"h-4 w-4\" />\r\n                                  <span>بدء</span>\r\n                  </button>\r\n                              ) : (\r\n                                <span className=\"text-gray-400 flex items-center space-x-1 rtl:space-x-reverse\">\r\n                                  <Lock className=\"h-4 w-4\" />\r\n                                  <span>مقفل</span>\r\n                                </span>\r\n                              )}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n            </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Exam History Section with Toggle Lists */}\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold text-gray-900 flex items-center space-x-2 rtl:space-x-reverse\">\r\n                <History className=\"h-5 w-5 text-primary-600\" />\r\n                <span>سجل الامتحانات</span>\r\n              </h3>\r\n              <p className=\"text-sm text-gray-600 mt-1\">عرض نتائج الامتحانات السابقة مع إمكانية الوصول السريع</p>\r\n            </div>\r\n            <div className=\"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full\">\r\n              {studentProgress.filter(p => p.status === 'completed').length} امتحان مكتمل\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          {studentProgress.filter(p => p.status === 'completed').length > 0 ? (\r\n            <div className=\"space-y-4\">\r\n              {/* Toggle List for Each Group */}\r\n              {Object.keys(examGroups).map(groupKey => {\r\n                const groupNum = parseInt(groupKey);\r\n                const groupExams = examGroups[groupKey] || [];\r\n                const completedExams = groupExams.filter(exam => {\r\n                  const progress = studentProgress.find(p => p.examId === exam._id && p.status === 'completed');\r\n                  return progress;\r\n                });\r\n                \r\n                if (completedExams.length === 0) return null;\r\n                \r\n                const isExpanded = expandedGroups[groupKey];\r\n                \r\n                // Calculate group statistics\r\n                const groupProgress = completedExams.map(exam => \r\n                  studentProgress.find(p => p.examId === exam._id && p.status === 'completed')\r\n                );\r\n                \r\n                const avgScore = groupProgress.length > 0 \r\n                  ? Math.round(groupProgress.reduce((sum, p) => sum + (p.percentage || 0), 0) / groupProgress.length)\r\n                  : 0;\r\n                \r\n                return (\r\n                  <div key={groupKey} className=\"border border-gray-200 rounded-lg overflow-hidden\">\r\n                    {/* Group Header - Clickable to Toggle */}\r\n                    <button\r\n                      onClick={() => toggleGroup(groupKey)}\r\n                      className=\"w-full p-4 bg-gradient-to-r from-green-50 to-blue-50 hover:from-green-100 hover:to-blue-100 transition-all duration-200 flex items-center justify-between\"\r\n                    >\r\n                      <div className=\"flex items-center space-x-3 rtl:space-x-reverse\">\r\n                        <div className=\"w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold\">\r\n                          {groupNum}\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <h4 className=\"font-bold text-gray-900 text-sm\">\r\n                            {groupNum === 0 ? 'اختبارات التأسيس' : `المجموعة ${groupNum}`}\r\n                          </h4>\r\n                          <p className=\"text-xs text-gray-600\">\r\n                            {completedExams.length} امتحان مكتمل\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"flex items-center space-x-3 rtl:space-x-reverse\">\r\n                        {avgScore > 0 && (\r\n                          <div className={`px-3 py-1 rounded-full text-sm font-bold ${\r\n                            avgScore >= 80 ? 'bg-green-100 text-green-700' :\r\n                            avgScore >= 60 ? 'bg-blue-100 text-blue-700' :\r\n                            'bg-orange-100 text-orange-700'\r\n                          }`}>\r\n                            {avgScore}%\r\n                          </div>\r\n                        )}\r\n                        {isExpanded ? (\r\n                          <ChevronDown className=\"h-5 w-5 text-gray-500\" />\r\n                        ) : (\r\n                          <ChevronRight className=\"h-5 w-5 text-gray-500\" />\r\n                        )}\r\n                      </div>\r\n                    </button>\r\n                    \r\n                    {/* Expandable Content */}\r\n                    {isExpanded && (\r\n                      <div className=\"p-4 bg-white border-t border-gray-200\">\r\n                        <div className=\"space-y-3\">\r\n                          {completedExams.map(exam => {\r\n                            const progress = studentProgress.find(p => p.examId === exam._id && p.status === 'completed');\r\n                            \r\n                            return (\r\n                              <div\r\n                                key={exam._id}\r\n                                className=\"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors cursor-pointer\"\r\n                                onClick={() => navigate(`/student/exam-history/${exam._id}`)}\r\n                              >\r\n                                <div className=\"flex items-center justify-between\">\r\n                                  <div className=\"flex-1\">\r\n                                    <div className=\"flex items-center space-x-3 rtl:space-x-reverse mb-2\">\r\n                                      <div className=\"p-2 bg-green-100 rounded-lg\">\r\n                                        <CheckCircle className=\"h-4 w-4 text-green-600\" />\r\n                                      </div>\r\n                                      <div>\r\n                                        <h5 className=\"font-semibold text-gray-900 text-sm\">\r\n                                          {exam.title}\r\n                                        </h5>\r\n                                        <p className=\"text-xs text-gray-600\">\r\n                                          {exam.totalQuestions} أسئلة\r\n                                        </p>\r\n                                      </div>\r\n                                    </div>\r\n                                    \r\n                                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mt-3\">\r\n                                      <div className=\"text-center\">\r\n                                        <div className=\"text-lg font-bold text-green-600\">{progress.score}/{exam.totalQuestions}</div>\r\n                                        <div className=\"text-xs text-gray-500\">الدرجة</div>\r\n                                      </div>\r\n                                      <div className=\"text-center\">\r\n                                        <div className=\"text-lg font-bold text-blue-600\">{progress.percentage.toFixed(2)}%</div>\r\n                                        <div className=\"text-xs text-gray-500\">النسبة</div>\r\n                                      </div>\r\n                                      {progress.timeSpent && (\r\n                                        <div className=\"text-center\">\r\n                                          <div className=\"text-lg font-bold text-purple-600\">\r\n                                            {Math.floor(progress.timeSpent / 60)}:{(progress.timeSpent % 60).toString().padStart(2, '0')}\r\n                                          </div>\r\n                                          <div className=\"text-xs text-gray-500\">الوقت المستغرق</div>\r\n                                        </div>\r\n                                      )}\r\n                                      {progress.submittedAt && (\r\n                                        <div className=\"text-center\">\r\n                                          <div className=\"text-lg font-bold text-orange-600\">\r\n                                            {new Date(progress.submittedAt).toLocaleDateString('en-GB')}\r\n                                          </div>\r\n                                          <div className=\"text-xs text-gray-500\">تاريخ الإرسال</div>\r\n                                        </div>\r\n                                      )}\r\n                                    </div>\r\n                                  </div>\r\n                                  \r\n                                  <div className=\"flex flex-col items-center space-y-2\">\r\n                                    <div className={`px-3 py-1 rounded-full text-xs font-medium ${\r\n                                      progress.percentage >= 80 ? 'bg-green-100 text-green-700' :\r\n                                      progress.percentage >= 60 ? 'bg-blue-100 text-blue-700' :\r\n                                      'bg-orange-100 text-orange-700'\r\n                                    }`}>\r\n                                      {progress.percentage >= 80 ? 'ممتاز' :\r\n                                       progress.percentage >= 60 ? 'جيد' : 'مقبول'}\r\n                                    </div>\r\n                                    \r\n                                    {progress.reviewExamId && (\r\n                                      <button\r\n                                        onClick={(e) => {\r\n                                          e.stopPropagation();\r\n                                          navigate(`/student/review-exam/${progress.reviewExamId}`);\r\n                                        }}\r\n                                        className=\"flex items-center space-x-1 rtl:space-x-reverse px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium hover:bg-purple-200 transition-colors\"\r\n                                      >\r\n                                        <RotateCcw className=\"h-3 w-3\" />\r\n                                        <span>امتحان المراجعة</span>\r\n                                      </button>\r\n                                    )}\r\n                                    \r\n                                    <button className=\"flex items-center space-x-1 rtl:space-x-reverse px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium hover:bg-gray-200 transition-colors\">\r\n                                      <Eye className=\"h-3 w-3\" />\r\n                                      <span>عرض التفاصيل</span>\r\n                                    </button>\r\n                                  </div>\r\n              </div>\r\n            </div>\r\n                            );\r\n                          })}\r\n              </div>\r\n            </div>\r\n                    )}\r\n              </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"p-4 bg-gray-100 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center\">\r\n                <History className=\"h-10 w-10 text-gray-400\" />\r\n              </div>\r\n              <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">لا توجد امتحانات مكتملة</h3>\r\n              <p className=\"text-gray-600\">ابدأ بحل الامتحانات لترى سجل النتائج هنا</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StudentDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}