{"ast":null,"code":"import _objectSpread from\"M:/Qudrat/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import toast from'react-hot-toast';import{useForm}from'react-hook-form';import{Plus,Search,Trash2,User,Mail,Phone,Eye}from'lucide-react';import ValidationErrors from'../../components/ValidationErrors';import{useSocket}from'../../contexts/SocketContext';import ConfirmationDialog from'../../components/ConfirmationDialog';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Students=()=>{const navigate=useNavigate();const[students,setStudents]=useState([]);const[loading,setLoading]=useState(true);const[showAddForm,setShowAddForm]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[validationErrors,setValidationErrors]=useState([]);const[deleteDialog,setDeleteDialog]=useState({isOpen:false,studentId:null,studentName:''});const{socket}=useSocket();const{register,handleSubmit,formState:{errors},reset}=useForm({defaultValues:{name:'',email:'',password:'',phoneNumber:''}});useEffect(()=>{fetchStudents();},[]);// Real-time event listeners\nuseEffect(()=>{if(socket){// Listen for new students\nsocket.on('student-added',data=>{console.log('👨‍🎓 Student added:',data);// Refresh students list\nfetchStudents();});// Listen for deleted students\nsocket.on('student-deleted',data=>{console.log('🗑️ Student deleted:',data);// Refresh students list\nfetchStudents();});// Cleanup listeners on unmount\nreturn()=>{socket.off('student-added');socket.off('student-deleted');};}},[socket]);const fetchStudents=async()=>{try{setLoading(true);const res=await axios.get('/api/users/students');setStudents(res.data.data);}catch(error){console.error('Error fetching students:',error);toast.error('حدث خطأ أثناء تحميل الطلاب');}finally{setLoading(false);}};const onSubmit=async data=>{try{console.log('=== CREATING STUDENT ===');console.log('Student data:',data);setValidationErrors([]);const response=await axios.post('/api/users/students',data);console.log('Student creation response:',response);console.log('Response status:',response.status);console.log('Response data:',response.data);toast.success('تم إنشاء الطالب بنجاح');setShowAddForm(false);reset();fetchStudents();}catch(error){var _error$response,_error$response2,_error$response3,_error$response3$data,_error$response4,_error$response4$data;console.error('=== ERROR CREATING STUDENT ===');console.error('Error object:',error);console.error('Error response:',error.response);console.error('Error message:',error.message);console.error('Error status:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status);console.error('Error data:',(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data);// Handle validation errors\nif((_error$response3=error.response)!==null&&_error$response3!==void 0&&(_error$response3$data=_error$response3.data)!==null&&_error$response3$data!==void 0&&_error$response3$data.errors){setValidationErrors(error.response.data.errors);}else if((_error$response4=error.response)!==null&&_error$response4!==void 0&&(_error$response4$data=_error$response4.data)!==null&&_error$response4$data!==void 0&&_error$response4$data.message&&error.response.data.message.includes('يوجد طالب مسجل بالفعل')){// Handle duplicate user error specifically\nconst errorMessage=error.response.data.message;toast.error(errorMessage);// Set validation error on the appropriate field\nconst duplicateField=error.response.data.duplicateField;if(duplicateField==='البريد الإلكتروني'){setValidationErrors([{field:'email',message:errorMessage}]);}else if(duplicateField==='رقم الجوال'){setValidationErrors([{field:'phoneNumber',message:errorMessage}]);}else{setValidationErrors([{field:'email',message:errorMessage}]);}// Clear the form fields that have duplicates and show helpful message\nif(duplicateField==='البريد الإلكتروني'){reset({email:''});toast('يرجى استخدام بريد إلكتروني مختلف',{icon:'ℹ️'});}else if(duplicateField==='رقم الجوال'){reset({phoneNumber:''});toast('يرجى استخدام رقم جوال مختلف',{icon:'ℹ️'});}}else{var _error$response5,_error$response5$data;toast.error(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message)||'حدث خطأ أثناء إنشاء الطالب');}}};const handleDelete=(studentId,studentName)=>{setDeleteDialog({isOpen:true,studentId:studentId,studentName:studentName});};const confirmDelete=async()=>{try{await axios.delete(\"/api/users/students/\".concat(deleteDialog.studentId));toast.success('تم حذف الطالب بنجاح');fetchStudents();setDeleteDialog({isOpen:false,studentId:null,studentName:''});}catch(error){console.error('Error deleting student:',error);toast.error('حدث خطأ أثناء حذف الطالب');setDeleteDialog({isOpen:false,studentId:null,studentName:''});}};const cancelDelete=()=>{setDeleteDialog({isOpen:false,studentId:null,studentName:''});};const handleViewProfile=studentId=>{navigate(\"/teacher/students/\".concat(studentId));};const filteredStudents=students.filter(student=>student.name.toLowerCase().includes(searchTerm.toLowerCase())||student.email.toLowerCase().includes(searchTerm.toLowerCase())||student.phoneNumber&&student.phoneNumber.toLowerCase().includes(searchTerm.toLowerCase()));if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"\\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u0637\\u0644\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0648\\u0625\\u062F\\u0627\\u0631\\u0629 \\u062D\\u0633\\u0627\\u0628\\u0627\\u062A \\u0627\\u0644\\u0637\\u0644\\u0627\\u0628\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowAddForm(true),className:\"btn-primary flex items-center space-x-2 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0637\\u0627\\u0644\\u0628\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(Search,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0627\\u0644\\u0628\\u062D\\u062B \\u0641\\u064A \\u0627\\u0644\\u0637\\u0644\\u0627\\u0628...\",className:\"input-field pr-10\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)})]})})}),showAddForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0637\\u0627\\u0644\\u0628 \\u062C\\u062F\\u064A\\u062F\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(ValidationErrors,{errors:validationErrors,onClose:()=>setValidationErrors([])}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0627\\u0644\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0643\\u0627\\u0645\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(User,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"text\",className:\"input-field pr-10 \".concat(errors.name?'border-red-500':''),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0637\\u0627\\u0644\\u0628\"},register('name',{required:'الاسم مطلوب',minLength:{value:2,message:'الاسم يجب أن يكون حرفين على الأقل'}})))]}),errors.name&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.name.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0627\\u0644\\u0628\\u0631\\u064A\\u062F \\u0627\\u0644\\u0625\\u0644\\u0643\\u062A\\u0631\\u0648\\u0646\\u064A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(Mail,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"email\",className:\"input-field pr-10 \".concat(errors.email?'border-red-500':''),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0627\\u0644\\u0628\\u0631\\u064A\\u062F \\u0627\\u0644\\u0625\\u0644\\u0643\\u062A\\u0631\\u0648\\u0646\\u064A\"},register('email',{required:'البريد الإلكتروني مطلوب',pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,message:'البريد الإلكتروني غير صحيح'}})))]}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.email.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"password\",className:\"input-field \".concat(errors.password?'border-red-500':''),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631\"},register('password',{required:'كلمة المرور مطلوبة',minLength:{value:6,message:'كلمة المرور يجب أن تكون 6 أحرف على الأقل'}}))),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.password.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u062C\\u0648\\u0627\\u0644\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(Phone,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"tel\",className:\"input-field pr-10 \".concat(errors.phoneNumber?'border-red-500':''),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0631\\u0642\\u0645 \\u0627\\u0644\\u062C\\u0648\\u0627\\u0644\"},register('phoneNumber',{required:'رقم الجوال مطلوب',pattern:{value:/^[0-9]{10,15}$/,message:'رقم الجوال يجب أن يحتوي على 10-15 رقم فقط'}})))]}),errors.phoneNumber&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:errors.phoneNumber.message})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowAddForm(false);reset();},className:\"btn-secondary\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",children:\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0627\\u0644\\u0637\\u0627\\u0644\\u0628\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:[\"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u0637\\u0644\\u0627\\u0628 (\",filteredStudents.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-0\",children:filteredStudents.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(User,{className:\"h-12 w-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0637\\u0644\\u0627\\u0628 \\u0645\\u0633\\u062C\\u0644\\u064A\\u0646\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gradient-to-r from-green-50 to-green-100\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-right text-sm font-semibold text-green-800 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0637\\u0627\\u0644\\u0628\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-right text-sm font-semibold text-green-800 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0628\\u0631\\u064A\\u062F \\u0627\\u0644\\u0625\\u0644\\u0643\\u062A\\u0631\\u0648\\u0646\\u064A\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-right text-sm font-semibold text-green-800 uppercase tracking-wider\",children:\"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u062C\\u0648\\u0627\\u0644\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-4 text-center text-sm font-semibold text-green-800 uppercase tracking-wider\",children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:filteredStudents.map(student=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-green-50 transition-colors duration-200\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mr-4 text-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-semibold text-gray-900\",children:student.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:new Date(student.createdAt).toLocaleDateString('en-GB')})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 rounded-full bg-gradient-to-r from-green-100 to-green-200 flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(User,{className:\"h-5 w-5 text-green-600\"})})})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900 font-medium\",children:student.email})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-right\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900 font-medium\",children:student.phoneNumber||'-'})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center space-x-2 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleViewProfile(student._id),className:\"flex items-center space-x-1 rtl:space-x-reverse px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-lg transition-all duration-200 text-sm font-medium shadow-sm hover:shadow-md transform hover:-translate-y-0.5\",title:\"\\u0639\\u0631\\u0636 \\u0627\\u0644\\u0645\\u0644\\u0641 \\u0627\\u0644\\u0634\\u062E\\u0635\\u064A\",children:[/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0639\\u0631\\u0636\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleDelete(student._id,student.name),className:\"flex items-center space-x-1 rtl:space-x-reverse px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-lg transition-all duration-200 text-sm font-medium shadow-sm hover:shadow-md transform hover:-translate-y-0.5\",title:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0637\\u0627\\u0644\\u0628\",children:[/*#__PURE__*/_jsx(Trash2,{className:\"h-4 w-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u062D\\u0630\\u0641\"})]})]})})]},student._id))})]})})})]}),/*#__PURE__*/_jsx(ConfirmationDialog,{isOpen:deleteDialog.isOpen,onClose:cancelDelete,onConfirm:confirmDelete,title:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0637\\u0627\\u0644\\u0628\",message:\"\\u0647\\u0644 \\u0623\\u0646\\u062A \\u0645\\u062A\\u0623\\u0643\\u062F \\u0645\\u0646 \\u062D\\u0630\\u0641 \\u0627\\u0644\\u0637\\u0627\\u0644\\u0628 \\\"\".concat(deleteDialog.studentName,\"\\\"\\u061F\"),confirmText:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u0637\\u0627\\u0644\\u0628\",cancelText:\"\\u0625\\u0644\\u063A\\u0627\\u0621\",type:\"danger\"})]});};export default Students;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","toast","useForm","Plus","Search","Trash2","User","Mail","Phone","Eye","ValidationErrors","useSocket","ConfirmationDialog","jsx","_jsx","jsxs","_jsxs","Students","navigate","students","setStudents","loading","setLoading","showAddForm","setShowAddForm","searchTerm","setSearchTerm","validationErrors","setValidationErrors","deleteDialog","setDeleteDialog","isOpen","studentId","studentName","socket","register","handleSubmit","formState","errors","reset","defaultValues","name","email","password","phoneNumber","fetchStudents","on","data","console","log","off","res","get","error","onSubmit","response","post","status","success","_error$response","_error$response2","_error$response3","_error$response3$data","_error$response4","_error$response4$data","message","includes","errorMessage","duplicateField","field","icon","_error$response5","_error$response5$data","handleDelete","confirmDelete","delete","concat","cancelDelete","handleViewProfile","filteredStudents","filter","student","toLowerCase","className","children","onClick","type","placeholder","value","onChange","e","target","onClose","_objectSpread","required","minLength","pattern","length","map","Date","createdAt","toLocaleDateString","_id","title","onConfirm","confirmText","cancelText"],"sources":["M:/Qudrat/client/src/pages/Teacher/Students.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport toast from 'react-hot-toast';\r\nimport { useForm } from 'react-hook-form';\r\nimport { Plus, Search, Trash2, User, Mail, Phone, Eye } from 'lucide-react';\r\nimport ValidationErrors from '../../components/ValidationErrors';\r\nimport { useSocket } from '../../contexts/SocketContext';\r\nimport ConfirmationDialog from '../../components/ConfirmationDialog';\r\n\r\nconst Students = () => {\r\n  const navigate = useNavigate();\r\n  const [students, setStudents] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [validationErrors, setValidationErrors] = useState([]);\r\n  const [deleteDialog, setDeleteDialog] = useState({ isOpen: false, studentId: null, studentName: '' });\r\n  const { socket } = useSocket();\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    reset\r\n  } = useForm({\r\n    defaultValues: {\r\n      name: '',\r\n      email: '',\r\n      password: '',\r\n      phoneNumber: ''\r\n    }\r\n  });\r\n\r\n\r\n  useEffect(() => {\r\n    fetchStudents();\r\n  }, []);\r\n\r\n  // Real-time event listeners\r\n  useEffect(() => {\r\n    if (socket) {\r\n      // Listen for new students\r\n      socket.on('student-added', (data) => {\r\n        console.log('👨‍🎓 Student added:', data);\r\n        // Refresh students list\r\n        fetchStudents();\r\n      });\r\n\r\n      // Listen for deleted students\r\n      socket.on('student-deleted', (data) => {\r\n        console.log('🗑️ Student deleted:', data);\r\n        // Refresh students list\r\n        fetchStudents();\r\n      });\r\n\r\n      // Cleanup listeners on unmount\r\n      return () => {\r\n        socket.off('student-added');\r\n        socket.off('student-deleted');\r\n      };\r\n    }\r\n  }, [socket]);\r\n\r\n  const fetchStudents = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get('/api/users/students');\r\n      setStudents(res.data.data);\r\n    } catch (error) {\r\n      console.error('Error fetching students:', error);\r\n      toast.error('حدث خطأ أثناء تحميل الطلاب');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const onSubmit = async (data) => {\r\n    try {\r\n      console.log('=== CREATING STUDENT ===');\r\n      console.log('Student data:', data);\r\n      setValidationErrors([]);\r\n      \r\n      const response = await axios.post('/api/users/students', data);\r\n      console.log('Student creation response:', response);\r\n      console.log('Response status:', response.status);\r\n      console.log('Response data:', response.data);\r\n      \r\n      toast.success('تم إنشاء الطالب بنجاح');\r\n      setShowAddForm(false);\r\n      reset();\r\n      fetchStudents();\r\n    } catch (error) {\r\n      console.error('=== ERROR CREATING STUDENT ===');\r\n      console.error('Error object:', error);\r\n      console.error('Error response:', error.response);\r\n      console.error('Error message:', error.message);\r\n      console.error('Error status:', error.response?.status);\r\n      console.error('Error data:', error.response?.data);\r\n      \r\n      // Handle validation errors\r\n      if (error.response?.data?.errors) {\r\n        setValidationErrors(error.response.data.errors);\r\n      } else if (error.response?.data?.message && error.response.data.message.includes('يوجد طالب مسجل بالفعل')) {\r\n        // Handle duplicate user error specifically\r\n        const errorMessage = error.response.data.message;\r\n        toast.error(errorMessage);\r\n        \r\n        // Set validation error on the appropriate field\r\n        const duplicateField = error.response.data.duplicateField;\r\n        if (duplicateField === 'البريد الإلكتروني') {\r\n          setValidationErrors([{\r\n            field: 'email',\r\n            message: errorMessage\r\n          }]);\r\n        } else if (duplicateField === 'رقم الجوال') {\r\n          setValidationErrors([{\r\n            field: 'phoneNumber',\r\n            message: errorMessage\r\n          }]);\r\n        } else {\r\n          setValidationErrors([{\r\n            field: 'email',\r\n            message: errorMessage\r\n          }]);\r\n        }\r\n        \r\n        // Clear the form fields that have duplicates and show helpful message\r\n        if (duplicateField === 'البريد الإلكتروني') {\r\n          reset({ email: '' });\r\n          toast('يرجى استخدام بريد إلكتروني مختلف', { icon: 'ℹ️' });\r\n        } else if (duplicateField === 'رقم الجوال') {\r\n          reset({ phoneNumber: '' });\r\n          toast('يرجى استخدام رقم جوال مختلف', { icon: 'ℹ️' });\r\n        }\r\n      } else {\r\n        toast.error(error.response?.data?.message || 'حدث خطأ أثناء إنشاء الطالب');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDelete = (studentId, studentName) => {\r\n    setDeleteDialog({\r\n      isOpen: true,\r\n      studentId: studentId,\r\n      studentName: studentName\r\n    });\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    try {\r\n      await axios.delete(`/api/users/students/${deleteDialog.studentId}`);\r\n      toast.success('تم حذف الطالب بنجاح');\r\n      fetchStudents();\r\n      setDeleteDialog({ isOpen: false, studentId: null, studentName: '' });\r\n    } catch (error) {\r\n      console.error('Error deleting student:', error);\r\n      toast.error('حدث خطأ أثناء حذف الطالب');\r\n      setDeleteDialog({ isOpen: false, studentId: null, studentName: '' });\r\n    }\r\n  };\r\n\r\n  const cancelDelete = () => {\r\n    setDeleteDialog({ isOpen: false, studentId: null, studentName: '' });\r\n  };\r\n\r\n  const handleViewProfile = (studentId) => {\r\n    navigate(`/teacher/students/${studentId}`);\r\n  };\r\n\r\n\r\n  const filteredStudents = students.filter(student =>\r\n    student.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    student.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    (student.phoneNumber && student.phoneNumber.toLowerCase().includes(searchTerm.toLowerCase()))\r\n  );\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-64\">\r\n        <div className=\"spinner\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">إدارة الطلاب</h1>\r\n          <p className=\"text-gray-600\">إضافة وإدارة حسابات الطلاب</p>\r\n        </div>\r\n        <button\r\n          onClick={() => setShowAddForm(true)}\r\n          className=\"btn-primary flex items-center space-x-2 rtl:space-x-reverse\"\r\n        >\r\n          <Plus className=\"h-4 w-4\" />\r\n          <span>إضافة طالب</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Search */}\r\n      <div className=\"card\">\r\n        <div className=\"card-body\">\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\">\r\n              <Search className=\"h-5 w-5 text-gray-400\" />\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"البحث في الطلاب...\"\r\n              className=\"input-field pr-10\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Add Student Form */}\r\n      {showAddForm && (\r\n        <div className=\"card\">\r\n          <div className=\"card-header\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900\">إضافة طالب جديد</h3>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <ValidationErrors \r\n              errors={validationErrors} \r\n              onClose={() => setValidationErrors([])} \r\n            />\r\n            <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-4\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">الاسم الكامل</label>\r\n                  <div className=\"relative\">\r\n                    <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\">\r\n                      <User className=\"h-5 w-5 text-gray-400\" />\r\n                    </div>\r\n                    <input\r\n                      type=\"text\"\r\n                      className={`input-field pr-10 ${errors.name ? 'border-red-500' : ''}`}\r\n                      placeholder=\"أدخل اسم الطالب\"\r\n                      {...register('name', {\r\n                        required: 'الاسم مطلوب',\r\n                        minLength: {\r\n                          value: 2,\r\n                          message: 'الاسم يجب أن يكون حرفين على الأقل'\r\n                        }\r\n                      })}\r\n                    />\r\n                  </div>\r\n                  {errors.name && (\r\n                    <p className=\"error-message\">{errors.name.message}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">البريد الإلكتروني</label>\r\n                  <div className=\"relative\">\r\n                    <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\">\r\n                      <Mail className=\"h-5 w-5 text-gray-400\" />\r\n                    </div>\r\n                    <input\r\n                      type=\"email\"\r\n                      className={`input-field pr-10 ${errors.email ? 'border-red-500' : ''}`}\r\n                      placeholder=\"أدخل البريد الإلكتروني\"\r\n                      {...register('email', {\r\n                        required: 'البريد الإلكتروني مطلوب',\r\n                        pattern: {\r\n                          value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\r\n                          message: 'البريد الإلكتروني غير صحيح'\r\n                        }\r\n                      })}\r\n                    />\r\n                  </div>\r\n                  {errors.email && (\r\n                    <p className=\"error-message\">{errors.email.message}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">كلمة المرور</label>\r\n                  <input\r\n                    type=\"password\"\r\n                    className={`input-field ${errors.password ? 'border-red-500' : ''}`}\r\n                    placeholder=\"أدخل كلمة المرور\"\r\n                    {...register('password', {\r\n                      required: 'كلمة المرور مطلوبة',\r\n                      minLength: {\r\n                        value: 6,\r\n                        message: 'كلمة المرور يجب أن تكون 6 أحرف على الأقل'\r\n                      }\r\n                    })}\r\n                  />\r\n                  {errors.password && (\r\n                    <p className=\"error-message\">{errors.password.message}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                  <label className=\"form-label\">رقم الجوال</label>\r\n                  <div className=\"relative\">\r\n                    <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none\">\r\n                      <Phone className=\"h-5 w-5 text-gray-400\" />\r\n                    </div>\r\n                    <input\r\n                      type=\"tel\"\r\n                      className={`input-field pr-10 ${errors.phoneNumber ? 'border-red-500' : ''}`}\r\n                      placeholder=\"أدخل رقم الجوال\"\r\n                      {...register('phoneNumber', {\r\n                        required: 'رقم الجوال مطلوب',\r\n                        pattern: {\r\n                          value: /^[0-9]{10,15}$/,\r\n                          message: 'رقم الجوال يجب أن يحتوي على 10-15 رقم فقط'\r\n                        }\r\n                      })}\r\n                    />\r\n                  </div>\r\n                  {errors.phoneNumber && (\r\n                    <p className=\"error-message\">{errors.phoneNumber.message}</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex justify-end space-x-3 rtl:space-x-reverse\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setShowAddForm(false);\r\n                    reset();\r\n                  }}\r\n                  className=\"btn-secondary\"\r\n                >\r\n                  إلغاء\r\n                </button>\r\n                <button type=\"submit\" className=\"btn-primary\">\r\n                  إضافة الطالب\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n\r\n      {/* Students List */}\r\n      <div className=\"card\">\r\n        <div className=\"card-header\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900\">\r\n            قائمة الطلاب ({filteredStudents.length})\r\n          </h3>\r\n        </div>\r\n        <div className=\"card-body p-0\">\r\n          {filteredStudents.length === 0 ? (\r\n            <div className=\"text-center py-8\">\r\n              <User className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n              <p className=\"text-gray-500\">لا توجد طلاب مسجلين</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gradient-to-r from-green-50 to-green-100\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-4 text-right text-sm font-semibold text-green-800 uppercase tracking-wider\">\r\n                      الطالب\r\n                    </th>\r\n                    <th className=\"px-6 py-4 text-right text-sm font-semibold text-green-800 uppercase tracking-wider\">\r\n                      البريد الإلكتروني\r\n                    </th>\r\n                    <th className=\"px-6 py-4 text-right text-sm font-semibold text-green-800 uppercase tracking-wider\">\r\n                      رقم الجوال\r\n                    </th>\r\n                    <th className=\"px-6 py-4 text-center text-sm font-semibold text-green-800 uppercase tracking-wider\">\r\n                      الإجراءات\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {filteredStudents.map((student) => (\r\n                    <tr key={student._id} className=\"hover:bg-green-50 transition-colors duration-200\">\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"flex items-center justify-end\">\r\n                          <div className=\"mr-4 text-right\">\r\n                            <div className=\"text-sm font-semibold text-gray-900\">\r\n                              {student.name}\r\n                            </div>\r\n                            <div className=\"text-xs text-gray-500\">\r\n                              {new Date(student.createdAt).toLocaleDateString('en-GB')}\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"h-10 w-10 flex-shrink-0\">\r\n                            <div className=\"h-10 w-10 rounded-full bg-gradient-to-r from-green-100 to-green-200 flex items-center justify-center shadow-sm\">\r\n                              <User className=\"h-5 w-5 text-green-600\" />\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                        <div className=\"text-sm text-gray-900 font-medium\">\r\n                          {student.email}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                        <div className=\"text-sm text-gray-900 font-medium\">\r\n                          {student.phoneNumber || '-'}\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-center\">\r\n                        <div className=\"flex items-center justify-center space-x-2 rtl:space-x-reverse\">\r\n                          <button\r\n                            onClick={() => handleViewProfile(student._id)}\r\n                            className=\"flex items-center space-x-1 rtl:space-x-reverse px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-lg transition-all duration-200 text-sm font-medium shadow-sm hover:shadow-md transform hover:-translate-y-0.5\"\r\n                            title=\"عرض الملف الشخصي\"\r\n                          >\r\n                            <Eye className=\"h-4 w-4\" />\r\n                            <span>عرض</span>\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleDelete(student._id, student.name)}\r\n                            className=\"flex items-center space-x-1 rtl:space-x-reverse px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-lg transition-all duration-200 text-sm font-medium shadow-sm hover:shadow-md transform hover:-translate-y-0.5\"\r\n                            title=\"حذف الطالب\"\r\n                          >\r\n                            <Trash2 className=\"h-4 w-4\" />\r\n                            <span>حذف</span>\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <ConfirmationDialog\r\n        isOpen={deleteDialog.isOpen}\r\n        onClose={cancelDelete}\r\n        onConfirm={confirmDelete}\r\n        title=\"حذف الطالب\"\r\n        message={`هل أنت متأكد من حذف الطالب \"${deleteDialog.studentName}\"؟`}\r\n        confirmText=\"حذف الطالب\"\r\n        cancelText=\"إلغاء\"\r\n        type=\"danger\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Students;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}